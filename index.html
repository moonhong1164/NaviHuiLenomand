<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NAVI&HUI LENORMAND</title>

<style>
  :root{
    --bg:#efe9fb; --panel:#ffffff; --ink:#2b2240; --muted:#6f65a6;
    --shadow:0 10px 30px rgba(40,20,60,.08);
    --pos:#4c88ff; --neg:#e25566; --neu:#49b776;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter, Pretendard, Apple SD Gothic Neo, "ë§‘ì€ ê³ ë”•", sans-serif}
  h1{font-size:clamp(22px,3.6vw,40px);letter-spacing:.5px;margin:28px 18px 6px;font-weight:900}
  .wrap{max-width:980px;margin:0 auto;padding:0 16px 60px}
  .toolbar{background:rgba(255,255,255,.6);backdrop-filter:blur(6px);border-radius:20px;padding:18px;margin:10px 0 20px;box-shadow:var(--shadow)}
  .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
  .btn{border:none;border-radius:14px;padding:10px 16px;font-weight:700;background:#f1eeff;color:#4a3d93;cursor:pointer;box-shadow:0 4px 14px rgba(70,50,120,.08)}
  .btn:active{transform:translateY(1px)}
  .btn.g{background:#e8fff4;color:#0f7148}
  .stage{display:grid;gap:16px}
  .panel{background:var(--panel);border-radius:18px;padding:18px;box-shadow:var(--shadow)}
  .note{color:var(--muted);font-weight:600}
  .tone{display:flex;align-items:center;gap:6px;margin-bottom:8px}
  .dot{display:inline-block;width:14px;height:14px;border-radius:999px}
  .dot.pos{background:var(--pos)} .dot.neg{background:var(--neg)} .dot.neu{background:var(--neu)}

  .cards{display:flex;gap:16px;justify-content:center;flex-wrap:nowrap}
  .card-box{width:min(90px,24vw)}
  .card{position:relative;border-radius:16px;background:#b8a6ff;box-shadow:0 8px 18px rgba(50,20,90,.12);overflow:hidden}
  .card::before{content:"";display:block;padding-top:140%}
  .card img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
  .pill{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:4px 8px;font-size:11px;font-weight:800;background:#ece6ff;margin-top:4px}
  .pill.pos{color:var(--pos)} .pill.neg{color:var(--neg)} .pill.neu{color:var(--neu)}
  .note.sm{font-size:12px;margin-top:4px}

  .summary{background:#faf9ff;border-radius:14px;padding:12px 14px;margin-top:8px}
  .summary ul{padding-left:18px;margin:8px 0}
  .summary li{margin:4px 0}

  /* â”€â”€â”€ [ì¤‘ìš”] GT ì¹´ë“œ ê·¸ë¦¼ë§Œ (ê¸€ì ìˆ¨ê¹€) â”€â”€â”€ */
  .card-box.min .pill,
  .card-box.min .note,
  .card-box.min .cap { display:none !important; }

  /* â”€â”€â”€ GT ë ˆì´ì•„ì›ƒ â”€â”€â”€ */
  .gt-grid{
    --gt-cols:9;
    display:grid;
    grid-template-columns:repeat(var(--gt-cols),1fr);
    gap:6px;
    justify-items:center;
  }
  .gt-grid .card-box{width:var(--gtw)}

  /* â”€â”€â”€ ì‹­ì ìŠ¤í”„ë ˆë“œ â”€â”€â”€ */
  .cross-area{
    position:relative;
    margin:12px auto;
    width:min(560px,92vw);
    height:min(90vh,122vw);
    overflow:visible;
    --crossw:120px;
  }
  .cross-card{
    position:absolute;
    width:var(--crossw);
    height:calc(var(--crossw)*1.4);
  }
</style>
</head>

<body>
<div class="wrap">
  <h1>NAVI&HUI LENORMAND</h1>

  <div class="toolbar">
    <div class="row">
      <button class="btn" id="b3">3ì¹´ë“œ</button>
      <button class="btn" id="b5">5ì¹´ë“œ</button>
      <button class="btn" id="bc">ì‹­ì</button>
      <button class="btn g" id="b94">9Ã—4</button>
      <button class="btn g" id="b84">8Ã—4+4</button>
      <button class="btn" id="b1" style="margin-left:auto">1ì¹´ë“œ</button>
    </div>
  </div>

  <div id="stage" class="stage"></div>
</div>

<script>
/* âœ… ì´ë¯¸ì§€ íŒŒì¼ëª…: ë ˆë…¸ë¨¼ë“œ-01.png ~ ë ˆë…¸ë¨¼ë“œ-36.png */
function imgSrc(id){
  return `img/lenormand/ë ˆë…¸ë¨¼ë“œ-${String(id).padStart(2,'0')}.png`;
}

/* âœ… ì¹´ë“œ ì´ë¦„ & í‚¤ì›Œë“œ */
const NAMES=[
  ,"1. Rider (ê¸°ìˆ˜)","2. Clover (í´ë¡œë²„)","3. Ship (ë°°)","4. House (ì§‘)","5. Tree (ë‚˜ë¬´)","6. Cloud (êµ¬ë¦„)",
  "7. Snake (ë±€)","8. Coffin (ê´€)","9. Bouquet (ë¶€ì¼€)","10. Scythe (ë‚«)","11. Whip (ì±„ì°)","12. Bird (ìƒˆ)",
  "13. Child (ì•„ì´)","14. Fox (ì—¬ìš°)","15. Bear (ê³°)","16. Star (ë³„)","17. Stork (í™©ìƒˆ)","18. Dog (ê°œ)",
  "19. Tower (íƒ‘)","20. Garden (ì •ì›)","21. Mountain (ì‚°)","22. Crossroad (ê°ˆë¦¼ê¸¸)","23. Mice (ì¥)","24. Heart (í•˜íŠ¸)",
  "25. Ring (ë°˜ì§€)","26. Book (ì±…)","27. Letter (í¸ì§€)","28. Man (ë‚¨ì„±)","29. Woman (ì—¬ì„±)","30. Lily (ë°±í•©)",
  "31. Sun (í•´)","32. Moon (ë‹¬)","33. Key (ì—´ì‡ )","34. Fish (ë¬¼ê³ ê¸°)","35. Anchor (ë‹»)","36. Cross (ì‹­ìê°€)"
];
const KW=[
  ,"ì†Œì‹Â·ì†ë„","ê¸°íšŒÂ·ìœ ì—°Â·ì‘ì€ í–‰ìš´","ì´ë™Â·í•´ì™¸","ê°€ì •Â·ì•ˆì •","ê±´ê°•Â·ì„±ì¥Â·ì‹œê°„","í˜¼ë€Â·íŒë‹¨ ë³´ë¥˜",
  "ì¥ì• Â·ìœ í˜¹Â·ê¸°ë§Œ","ëÂ·ì „í™˜","ê¸°ì¨Â·ì„ ë¬¼Â·í˜¸ì˜","ì ˆë‹¨Â·ê²°ë‹¨","ê°ˆë“±Â·ë°˜ë³µ","ëŒ€í™”Â·ì—°ë½",
  "ìƒˆ ì‹œì‘Â·ìˆœìˆ˜","í˜„ì‹¤Â·ì£¼ì˜","ë³´í˜¸Â·í˜","í¬ë§Â·ì¸í„°ë„·","ë³€í™”Â·ì´ë™","ìš°ì •Â·ì¶©ì„±",
  "ê±°ë¦¬Â·ê·œì •","ê³µê°œÂ·í‰íŒ","ì§€ì—°Â·ë²½","ê²°ì •Â·ì„ íƒ","ë¶ˆì•ˆÂ·ì†Œëª¨","ì‚¬ë‘Â·ì—´ì •",
  "ê³„ì•½Â·ì¥ê¸°","ë¹„ë°€Â·í•™ìŠµ","ë¬¸ì„œÂ·ë©”ì¼","ë‚¨ì„±","ì—¬ì„±","ì„±ìˆ™Â·íœ´ì‹",
  "ì„±ê³µ","ëª…ì˜ˆÂ·ê°ì •","í•´ê²°Â·ì •ë‹µ","ì¬ë¬¼Â·ê±°ë˜","ì•ˆì •","ê³ ë‚œÂ·ì±…ì„"
];

/* âœ… ê¸/ë¶€/ì¤‘ */
const TONE={
  1:"neu",2:"pos",3:"pos",4:"pos",5:"pos",6:"neu",7:"neg",8:"neg",9:"pos",10:"neg",11:"neg",12:"pos",
  13:"pos",14:"neu",15:"neu",16:"pos",17:"pos",18:"pos",19:"neu",20:"pos",21:"neg",22:"neu",23:"neg",24:"pos",
  25:"pos",26:"neu",27:"pos",28:"neu",29:"neu",30:"pos",31:"pos",32:"pos",33:"pos",34:"pos",35:"pos",36:"neg"
};

const stage=document.getElementById('stage');
function clearAll(){ stage.innerHTML=""; }
function shuffle(a){ for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j]];} }
function pick(n){const ids=[...Array(36)].map((_,i)=>i+1);shuffle(ids);return ids.slice(0,n);}

function toneOf(id){return TONE[id]||"neu";}
function toneText(t){return t==="pos"?"ê¸ì •":t==="neg"?"ë¶€ì •":"ì¤‘ë¦½";}
function toneIcon(t){return `<i class="dot ${t}"></i>`;}

function cardBox(id,min=false){
  const info=min?"":`
    <div class="pill ${toneOf(id)}">${toneIcon(toneOf(id))} ${toneText(toneOf(id))}</div>
    <div class="note sm">${KW[id]}</div>`;
  return `<div class="card-box ${min?'min':''}">
    <div class="card"><img src="${imgSrc(id)}" alt="${NAMES[id]}"></div>${info}</div>`;
}

function renderSummary(ids){
  let p=0,n=0,u=0;ids.forEach(id=>{const t=toneOf(id);if(t==="pos")p++;else if(t==="neg")n++;else u++;});
  const badge=(p>n)?"pos":(n>p)?"neg":"neu";
  const box=document.createElement("div");
  box.className="summary";
  box.innerHTML=`<div class="tone">${toneIcon(badge)} <b>${toneText(badge)}</b>
    <span class="note"> (ê¸ì • ${p} / ë¶€ì • ${n} / ì¤‘ë¦½ ${u})</span></div>
    <ul>${ids.map(id=>`<li><b>${NAMES[id].replace(/^\d+\. /,"")}</b> â€” ${KW[id]}</li>`).join("")}</ul>`;
  stage.appendChild(box);
}

/* 1/3/5 */
function r1(){clearAll();const id=pick(1)[0];
  const p=document.createElement('div');p.className="panel";
  p.innerHTML=`<div class="cards">${cardBox(id)}</div>`;stage.appendChild(p);renderSummary([id]);}
function r3(){clearAll();const ids=pick(3);
  const p=document.createElement('div');p.className="panel";
  p.innerHTML=`<div class="cards">${ids.map(id=>cardBox(id)).join("")}</div>`;stage.appendChild(p);renderSummary(ids);}
function r5(){clearAll();const ids=pick(5);
  const p=document.createElement('div');p.className="panel";
  p.innerHTML=`<div class="cards">${ids.map(id=>cardBox(id)).join("")}</div>`;stage.appendChild(p);renderSummary(ids);}

/* ì‹­ì */
function rCross(){
  clearAll();
  const ids=pick(5);
  const [c,l,r,t,b] = [ids[2],ids[0],ids[1],ids[3],ids[4]];
  const wrap=document.createElement('div');wrap.className="panel";
  wrap.innerHTML=`<div class="cross-area" id="cross">
    <div class="cross-card" id="C">${cardBox(c)}</div>
    <div class="cross-card" id="L">${cardBox(l)}</div>
    <div class="cross-card" id="R">${cardBox(r)}</div>
    <div class="cross-card" id="T">${cardBox(t)}</div>
    <div class="cross-card" id="B">${cardBox(b)}</div>
  </div>`;
  stage.appendChild(wrap);

  requestAnimationFrame(()=>{
    const area=document.getElementById('cross');
    const w=area.clientWidth,h=area.clientHeight;
    const gap=10,side=14,vpad=14;

    const wBased=Math.floor((w-side*2-gap*2)/3);
    const hBased=Math.floor((h-vpad*2-gap*2)/4.2);
    const cw=Math.max(60,Math.min(110,Math.min(wBased,hBased)));
    area.style.setProperty('--crossw',`${cw}px`);

    const ch=Math.floor(cw*1.4);
    const cx=Math.floor(w/2),cy=Math.floor(h/2);
    const pos=(id,x,y)=>{const el=document.getElementById(id);el.style.left=x+"px";el.style.top=y+"px";el.style.transform="translate(-50%,-50%)";}
    pos("C",cx,cy);
    pos("L",cx-(cw+gap),cy);
    pos("R",cx+(cw+gap),cy);
    pos("T",cx,cy-(ch+gap));
    pos("B",cx,cy+(ch+gap));
  });

  renderSummary([l,r,t,b,c]);
}

/* 9x4 & 8x4+4 */
function fitGT(wrap,grid,cols){
  const pad=20;
  const w=wrap.clientWidth-pad*2;
  const maxW=Math.floor((w-(cols-1)*6)/cols);
  const cw=Math.max(48,Math.min(84,maxW));
  grid.style.setProperty('--gtw',`${cw}px`);
}
function rGT(mode){
  clearAll();
  const ids=[...Array(36)].map((_,i)=>i+1);shuffle(ids);
  const is8=(mode==="8x4+4"||mode==="8x4e");
  const cols=is8?8:9;const total=is8?32:36;
  const main=ids.slice(0,total),ess=is8?ids.slice(32):[];

  const wrap=document.createElement('div');wrap.className="panel";wrap.id="gtW";
  wrap.innerHTML=`<div class="note" style="font-weight:800">ì¹´ë“œë¥¼ ëˆŒëŸ¬ í‚¤ì¹´ë“œ ìƒì„¸ í™•ì¸</div>`;
  const g=document.createElement('div');g.className="gt-grid";g.id="gtG";g.style.setProperty('--gt-cols',cols);
  main.forEach((id,idx)=>{const el=document.createElement('div');el.className="card-box min";el.innerHTML=cardBox(id,true);g.appendChild(el);});
  wrap.appendChild(g);

  requestAnimationFrame(()=>{
    fitGT(wrap,g,cols);
    const onR=()=>fitGT(wrap,g,cols);
    if(!g._b){window.addEventListener('resize',onR);g._b=true;}
  });

  // í–‰ë³„ ì¹´ë“œ
  const rows=Math.ceil(total/cols);
  const rowBox=document.createElement('div');rowBox.className='summary';
  rowBox.innerHTML=`<div class="tone">ğŸ—‚ï¸ <b>í–‰ë³„ ì¹´ë“œ</b></div>
    <ol style="margin:8px 0 0 18px">
      ${Array.from({length:rows}).map((_,r)=>{
        const slice=main.slice(r*cols,r*cols+cols);
        return `<li>${slice.map(x=>NAMES[x]).join(" Â· ")}</li>`;}).join("")}
    </ol>`;
  wrap.appendChild(rowBox);

  // ì—ì„¼ìŠ¤
  if(is8){
    const e=document.createElement('div');e.className="summary";
    e.innerHTML=`<div class="tone"><b>ì—ì„¼ìŠ¤ 4ì¥</b></div>
    ${ess.map(id=>NAMES[id]).join(" Â· ")}`;
    wrap.appendChild(e);
  }

  stage.appendChild(wrap);
}

/* ë²„íŠ¼ ì—°ê²° */
document.getElementById('b1').onclick=r1;
document.getElementById('b3').onclick=r3;
document.getElementById('b5').onclick=r5;
document.getElementById('bc').onclick=rCross;
document.getElementById('b94').onclick=()=>rGT("9x4");
document.getElementById('b84').onclick=()=>rGT("8x4+4");
</script>
</body>
</html>