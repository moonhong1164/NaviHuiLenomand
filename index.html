<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NAVI&HUI LENORMAND</title>
<style>
  :root{
    --bg:#f6efff;--card:#fff;--ink:#2b1560;--shadow:rgba(0,0,0,.12);
    --pill:#ffffff;--pill-on:#dff3ff;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font-family:ui-sans-serif,system-ui,'Apple SD Gothic Neo','Noto Sans KR',sans-serif;color:var(--ink)}
  .wrap{max-width:960px;margin:auto;padding:20px}
  h1{margin:8px 0 18px;text-align:center;font-size:34px;font-weight:800}
  .toolbar{background:var(--pill);border-radius:18px;box-shadow:0 6px 20px var(--shadow);padding:14px 16px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:center}
  .qbox{flex:1 1 320px;display:flex;gap:8px;align-items:center}
  .qbox input{flex:1;padding:10px 12px;border:1px solid #ded6f8;border-radius:12px;background:#fff}
  .btn{border:0;padding:10px 16px;border-radius:14px;background:#fff;box-shadow:0 3px 12px var(--shadow);cursor:pointer;font-weight:700}
  .btn:active{transform:translateY(1px)}
  .btn.on{background:var(--pill-on)}
  #stage{margin-top:18px;background:#fff;border-radius:16px;box-shadow:0 6px 18px var(--shadow);padding:16px}
  /* ì¹´ë“œ ê³µí†µ */
  .card{width:120px;aspect-ratio:3/4;background:var(--card);border-radius:16px;box-shadow:0 4px 14px var(--shadow);display:flex;align-items:center;justify-content:center}
  .card img{width:92%;height:auto;border-radius:10px}
  .caption{margin-top:6px;text-align:center;font-size:13px;line-height:1.15}
  .tone{display:inline-block;margin-top:4px;padding:3px 8px;border-radius:999px;font-size:12px}
  .tone.pos{background:#e8f2ff} .tone.neu{background:#e7ffe8} .tone.neg{background:#ffe7e7}
  /* ìˆ˜í‰ ìŠ¤í”„ë ˆë“œ */
  .row{display:flex;gap:14px;justify-content:center;align-items:flex-start;flex-wrap:nowrap}
  /* ì‹­ì: ê²¹ì¹¨ ì œê±° */
  .cross{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;max-width:640px;margin:0 auto}
  .cross .card{width:100%;max-width:150px}
  /* 9x4 ê·¸ë‘íƒ€ë¸”ë¡œ */
  .grand{display:grid;grid-template-columns:repeat(9,1fr);gap:8px}
  @media (max-width:900px){ .grand{grid-template-columns:repeat(8,1fr)} }
  @media (max-width:760px){ .grand{grid-template-columns:repeat(7,1fr)} }
  @media (max-width:640px){ .grand{grid-template-columns:repeat(6,1fr)} }
  @media (max-width:540px){ .grand{grid-template-columns:repeat(5,1fr)} }
  @media (max-width:460px){ .grand{grid-template-columns:repeat(4,1fr)} .card{width:94px} }
  @media (max-width:380px){ .card{width:86px} .cross .card{max-width:120px} .row{gap:10px} }
  .item{text-align:center;cursor:pointer}
  .box{margin-top:14px;padding:12px;border:1px dashed #d7cfff;border-radius:12px;background:#fbf9ff}
  .muted{opacity:.7}
</style>
</head>
<body>
<div class="wrap">
  <h1>NAVI&HUI LENORMAND</h1>

  <div class="toolbar">
    <div class="qbox">
      <label><input id="useQ" type="checkbox" /> ì§ˆë¬¸ ì…ë ¥</label>
      <input id="q" placeholder="ì§ˆë¬¸ì„ ì ì–´ ì£¼ì„¸ìš”" />
    </div>
    <button class="btn" onclick="drawN(1,this)">1ì¹´ë“œ</button>
    <button class="btn" onclick="drawN(3,this)">3ì¹´ë“œ</button>
    <button class="btn" onclick="drawN(5,this)">5ì¹´ë“œ</button>
    <button class="btn" onclick="drawCross(this)">+ ì‹­ì</button>
    <button class="btn on" onclick="drawGrand(this)">9Ã—4</button>
  </div>

  <div id="stage"></div>
</div>

<script>
/* ===== ì¹´ë“œ ë°ì´í„° (ì‚¬ìš©ìê°€ ì¤€ ìµœì¢…ë³¸) ===== */
const CARDS = [
   {num:1, code:"Rider", kr:"ê¸°ìˆ˜", key:"ì†Œì‹â€¢ì´ë™", add:"ë¹ ë¥¸ ë³€í™”Â·ì—°ë½ ë„ì°©", type:"neutral"},
  {num:2, code:"Clover", kr:"í´ë¡œë²„", key:"í–‰ìš´â€¢ê¸°íšŒ", add:"ì§§ì€ ì°¬ìŠ¤Â·ì‹œë„ ì¢‹ìŒ", type:"negative"},
  {num:3, code:"Ship", kr:"ì„ ë°•", key:"ì—¬í–‰â€¢í™•ì¥", add:"ê´€ê³„Â·í™˜ê²½ ë³€í™”", type:"neutral"},
  {num:4, code:"House", kr:"ì§‘", key:"ê°€ì •â€¢ì•ˆì •", add:"ê¸°ë°˜ ë‹¤ì§€ê¸°", type:"neutral"},
  {num:5, code:"Tree", kr:"ë‚˜ë¬´", key:"ê±´ê°•â€¢ì„±ì¥", add:"ì¥ê¸° ì„±ì¥Â·íšŒë³µ", type:"neutral"},
  {num:6, code:"Cloud", kr:"êµ¬ë¦„", key:"í˜¼ë€â€¢íŒë‹¨ ë³´ë¥˜", add:"íŒë‹¨ ë³´ë¥˜Â·ì±™ê¸°ê¸°", type:"positive"},
  {num:7, code:"Snake", kr:"ë±€", key:"ìœ í˜¹â€¢ê¸°ë§Œ", add:"ê²‰ê³¼ì† ë‹¤ë¦„Â·ì£¼ì˜", type:"positive"},
  {num:8, code:"Coffin", kr:"ê´€", key:"ëâ€¢ì „í™˜", add:"ì •ë¦¬Â·ì¬ì¶œë°œ", type:"positive"},
  {num:9, code:"Bouquet", kr:"ë¶€ì¼€", key:"ì„ ë¬¼â€¢ê¸°ì¨", add:"í˜¸ì˜ ìƒìŠ¹", type:"negative"},
  {num:10, code:"Scythe", kr:"ë‚«", key:"ë‹¨ì ˆâ€¢ê²°ì •", add:"ë¹ ë¥¸ ì„ íƒ", type:"positive"},
  {num:11, code:"Whip", kr:"ì±„ì°", key:"ê°ˆë“±â€¢ë°˜ë³µ", add:"ë£¨í”„ ëŠê¸°", type:"positive"},
  {num:12, code:"Birds", kr:"ìƒˆ", key:"ëŒ€í™”â€¢ì†Œë¬¸", add:"ë§ ë§ì€ ì‹œê¸°", type:"neutral"},
  {num:13, code:"Child", kr:"ì•„ì´", key:"ìƒˆ ì‹œì‘â€¢ìˆœìˆ˜", add:"ì‘ì§€ë§Œ ì„±ì¥ í¼", type:"negative"},
  {num:14, code:"Fox", kr:"ì—¬ìš°", key:"ì¼â€¢ì˜ì‹¬", add:"ê³„ì•½Â·ì •ë³´ ì¬í™•ì¸", type:"neutral"},
  {num:15, code:"Bear", kr:"ê³°", key:"í˜â€¢ë³´í˜¸", add:"í›„ì›Â·ë¦¬ë”ì‹­", type:"neutral"},
  {num:16, code:"Stars", kr:"ë³„", key:"í¬ë§â€¢ëª©í‘œ", add:"ë¹„ì „ ëª…í™•", type:"negative"},
  {num:17, code:"Stork", kr:"í™©ìƒˆ", key:"ë³€í™”â€¢ê°œì„ ", add:"ìŠµê´€ ì—…ë°ì´íŠ¸", type:"neutral"},
  {num:18, code:"Dog", kr:"ê°œ", key:"ì‹ ë¢°â€¢ìš°ì •", add:"ë™ë§¹Â·íŒŒíŠ¸ë„ˆì‹­", type:"negative"},
  {num:19, code:"Tower", kr:"íƒ‘", key:"ì œë„â€¢ë…ë¦½", add:"í™€ë¡œì„œê¸°", type:"neutral"},
  {num:20, code:"Garden", kr:"ì •ì›", key:"ëª¨ì„â€¢ê³µê°œ", add:"ì¢‹ì€ í‰íŒ", type:"neutral"},
  {num:21, code:"Mountain", kr:"ì‚°", key:"ì¥ì• â€¢ì§€ì—°", add:"ì‹œê°„ í•„ìš”", type:"positive"},
  {num:22, code:"Crossroad", kr:"ê°ˆë¦¼ê¸¸", key:"ì„ íƒâ€¢ê²°ì •", add:"ë°ì´í„° ë¹„êµ", type:"neutral"},
  {num:23, code:"Mice", kr:"ì¥", key:"ì†ì‹¤â€¢ì†Œëª¨", add:"ë¯¸ì„¸ëˆ„ìˆ˜ ì ê²€", type:"positive"},
  {num:24, code:"Heart", kr:"í•˜íŠ¸", key:"ì‚¬ë‘â€¢ê°ì •", add:"ê°ì • íšŒë³µ", type:"negative"},
  {num:25, code:"Ring", kr:"ë°˜ì§€", key:"ê³„ì•½â€¢ìˆœí™˜", add:"ì¥ê¸° ì»¤ë°‹", type:"negative"},
  {num:26, code:"Book", kr:"ì±…", key:"ë¹„ë°€â€¢í•™ìŠµ", add:"ì •ë³´ ë¯¸ê³µê°œ", type:"neutral"},
  {num:27, code:"Letter", kr:"í¸ì§€", key:"ì—°ë½â€¢ë¬¸ì„œ", add:"ì¦ê±°Â·í†µë³´", type:"neutral"},
  {num:28, code:"Man", kr:"ë‚¨ì„±", key:"í•µì‹¬ ì¸ë¬¼", add:"ì¤‘ì‹¬ ë‚¨ì„±", type:"neutral"},
  {num:29, code:"Woman", kr:"ì—¬ì„±", key:"í•µì‹¬ ì¸ë¬¼", add:"ì¤‘ì‹¬ ì—¬ì„±", type:"neutral"},
  {num:30, code:"Lily", kr:"ë°±í•©", key:"í‰í™”â€¢ì„±ìˆ™", add:"íœ´ì‹Â·í’ˆìœ„", type:"neutral"},
  {num:31, code:"Sun", kr:"íƒœì–‘", key:"ì„±ê³µâ€¢í™œë ¥", add:"ê¸ì • ê²°ê³¼", type:"negative"},
  {num:32, code:"Moon", kr:"ë‹¬", key:"ëª…ì˜ˆâ€¢ê°ì •", add:"ê°ì • ë¦¬ë“¬", type:"negative"},
  {num:33, code:"Key", kr:"ì—´ì‡ ", key2:"í•´ê²°â€¢ì‹œì‘", add:"ëŒíŒŒêµ¬", type:"negative"},
  {num:34, code:"Fish", kr:"ë¬¼ê³ ê¸°", key:"ì¬ë¬¼â€¢êµë¥˜", add:"ê±°ë˜ ì¦ê°€", type:"negative"},
  {num:35, code:"Anchor", kr:"ë‹»", key:"ì•ˆì •â€¢ê³ ì •", add:"ì§€ì†ì„±", type:"negative"},
  {num:36, code:"Cross", kr:"ì‹­ìê°€", key:"ê³ ë‚œâ€¢ì‹ ë…", add:"ì±…ì„Â·ë²„í‹°ê¸°", type:"positive"},
];

/* ===== ì´ë¯¸ì§€ ìë™ ë³µêµ¬ ë¡œë” ===== */
const IMG_CANDIDATES = ['','cards/','images/','img/'];
const EXT_CANDIDATES = ['.png','.webp','.jpg','.PNG','.JPG'];
function srcFor(num2){
  // ê¸°ë³¸ ê²½ë¡œ
  return encodeURI(`ë ˆë…¸ë¨¼ë“œ-${num2}.png`);
}
function makeImg(num2){
  const img=document.createElement('img');
  img.dataset.num2=num2;
  img.dataset.try=0;
  img.src=srcFor(num2);
  img.onerror=function(){ tryNext(this); };
  return img;
}
function tryNext(img){
  let t=parseInt(img.dataset.try,10);
  const num2=img.dataset.num2;
  const total=IMG_CANDIDATES.length*EXT_CANDIDATES.length;
  if(t>=total){ img.onerror=null; return; }
  const p=IMG_CANDIDATES[Math.floor(t/EXT_CANDIDATES.length)];
  const e=EXT_CANDIDATES[t%EXT_CANDIDATES.length];
  img.dataset.try = t+1;
  img.src = encodeURI(`${p}ë ˆë…¸ë¨¼ë“œ-${num2}${e}`);
}

/* ===== ìœ í‹¸ ===== */
const pad2=n=>String(n).padStart(2,'0');
function toneBadge(t){
  if(t==='negative') return '<span class="tone pos">ğŸ”µ ê¸ì •</span>';
  if(t==='positive') return '<span class="tone neg">ğŸ”´ ë¶€ì •</span>';
  return '<span class="tone neu">ğŸŸ¢ ì¤‘ë¦½</span>';
}
function cardTile(c,clickable=false,handler=''){
  const el = document.createElement('div');
  el.className='item';
  const card = document.createElement('div'); card.className='card';
  card.appendChild(makeImg(pad2(c.num)));
  el.appendChild(card);
  const cap = document.createElement('div');
  cap.className='caption';
  cap.innerHTML = `<b>${c.num}. ${c.code}</b><br>${toneBadge(c.type)}<br>${c.key}<br><span class="muted">${c.add}</span>`;
  el.appendChild(cap);
  if(clickable) el.onclick=handler;
  return el;
}
function shuffle(arr){ return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);}

/* ===== ë Œë” ===== */
const stage=document.getElementById('stage');

function drawN(n,btn){
  setOn(btn);
  const cards = shuffle([...CARDS]).slice(0,n);
  stage.innerHTML='';
  const row=document.createElement('div'); row.className='row';
  cards.forEach(c=> row.appendChild(cardTile(c)));
  stage.appendChild(row);
}
function drawCross(btn){
  setOn(btn);
  const cs = shuffle([...CARDS]).slice(0,5);
  stage.innerHTML='';
  const grid=document.createElement('div'); grid.className='cross';
  // ìƒë‹¨ ê°€ìš´ë°
  grid.appendChild(document.createElement('div'));
  grid.appendChild(cardTile(cs[0]));
  grid.appendChild(document.createElement('div'));
  // ì¤‘ë‹¨ ì¢Œ-ì¤‘ì•™-ìš°
  grid.appendChild(cardTile(cs[1]));
  grid.appendChild(cardTile(cs[2]));
  grid.appendChild(cardTile(cs[3]));
  // í•˜ë‹¨ ê°€ìš´ë°
  grid.appendChild(document.createElement('div'));
  grid.appendChild(cardTile(cs[4]));
  grid.appendChild(document.createElement('div'));
  stage.appendChild(grid);
}
function drawGrand(btn){
  setOn(btn);
  const arr = shuffle([...CARDS]); // 36ì¥ ì „ë¶€
  stage.innerHTML='';
  const grid=document.createElement('div'); grid.className='grand'; grid.id='grand';
  arr.forEach((c,i)=>{
    const item=cardTile(c,true,()=>showKey(i,arr));
    grid.appendChild(item);
  });
  stage.appendChild(grid);
  const box=document.createElement('div'); box.className='box'; box.id='detail';
  box.innerHTML='ì¹´ë“œë¥¼ ëˆ„ë¥´ë©´ í‚¤ ì¹´ë“œ ê¸°ì¤€ì˜ <b>ì£¼ìœ„ ì¹´ë“œ</b>ì™€ <b>ë‚˜ì´íŒ…</b>ì„ ì•„ë˜ì— ë³´ì—¬ì¤ë‹ˆë‹¤.';
  stage.appendChild(box);
}
function showKey(idx,arr){
  const k=arr[idx];
  // 9x4 ì¸ë±ìŠ¤ì—ì„œ ìƒí•˜ì¢Œìš°, ë‚˜ì´íŒ… ê³„ì‚°
  const cols=9;
  const around=[];
  const r=Math.floor(idx/cols), c=idx%cols;
  function pushIf(rr,cc){
    const i=rr*cols+cc;
    if(rr>=0&&rr<4&&cc>=0&&cc<9) around.push(arr[i]);
  }
  // ì£¼ë³€
  pushIf(r,c-1); pushIf(r,c+1); pushIf(r-1,c); pushIf(r+1,c);
  // ë‚˜ì´íŒ… (ë§ ì´ë™)
  const knight=[];
  [[-1,-2],[-2,-1],[+1,-2],[+2,-1],[+1,+2],[+2,+1],[-1,+2],[-2,+1]].forEach(([dr,dc])=>{
    const rr=r+dr, cc=c+dc;
    if(rr>=0&&rr<4&&cc>=0&&cc<9) knight.push(arr[rr*cols+cc]);
  });

  const detail=document.getElementById('detail');
  detail.innerHTML = `
    <div style="display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap">
      <div>${cardTile(k).outerHTML}</div>
      <div>
        <b>ì£¼ìœ„ ì¹´ë“œ</b><br>
        ${around.map(x=>`${x.num}. ${x.code} â€” ${x.key} ${toneBadge(x.type)}`).join('<br>') || 'â€”'}
        <div style="height:8px"></div>
        <b>ë‚˜ì´íŒ…</b><br>
        ${knight.map(x=>`${x.num}. ${x.code} â€” ${x.key} ${toneBadge(x.type)}`).join('<br>') || 'â€”'}
      </div>
    </div>
  `;
}

/* ë²„íŠ¼ í† ê¸€ */
function setOn(btn){
  document.querySelectorAll('.btn').forEach(b=>b.classList.remove('on'));
  if(btn) btn.classList.add('on');
}
</script>
</body>
</html>
