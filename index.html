<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NAVI&HUI LENORMAND</title>
<style>
  :root{
    --bg:#f6efff;
    --card:#ffffff;
    --ink:#2b1560;
    --shadow:rgba(0,0,0,.12);
    --pill:#ffffff;
    --pill-on:#dff3ff;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    background:var(--bg);
    font-family:ui-sans-serif,system-ui,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
    color:var(--ink);
  }
  .wrap{
    max-width:960px;
    margin:0 auto;
    padding:20px;
  }
  h1{
    margin:8px 0 18px;
    text-align:center;
    font-size:34px;
    font-weight:800;
  }

  .toolbar{
    background:var(--pill);
    border-radius:18px;
    box-shadow:0 6px 20px var(--shadow);
    padding:14px 16px;
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    align-items:center;
    justify-content:center;
  }
  .qbox{
    flex:1 1 320px;
    display:flex;
    gap:8px;
    align-items:center;
    font-size:14px;
  }
  .qbox input[type="text"]{
    flex:1;
    padding:10px 12px;
    border:1px solid #ded6f8;
    border-radius:12px;
    background:#fff;
  }
  .btn{
    border:0;
    padding:10px 16px;
    border-radius:14px;
    background:#fff;
    box-shadow:0 3px 12px var(--shadow);
    cursor:pointer;
    font-weight:700;
    font-size:14px;
  }
  .btn.on{background:var(--pill-on);}

  #stage{
    margin-top:18px;
    background:#fff;
    border-radius:16px;
    box-shadow:0 6px 18px var(--shadow);
    padding:16px;
  }

  /* ì¹´ë“œ ê³µí†µ */
  .item{text-align:center;cursor:pointer;}
  .card{
    width:120px;
    aspect-ratio:3/4;
    background:var(--card);
    border-radius:16px;
    box-shadow:0 4px 14px var(--shadow);
    display:flex;
    align-items:center;
    justify-content:center;
    margin:0 auto;
  }
  .card img{
    width:92%;
    height:auto;
    border-radius:10px;
  }
  .caption{
    margin-top:6px;
    font-size:13px;
    line-height:1.15;
  }
  .muted{opacity:.7;}
  .tone{
    display:inline-block;
    margin-top:4px;
    padding:3px 8px;
    border-radius:999px;
    font-size:12px;
  }
  .tone.pos{background:#e8f2ff;}
  .tone.neu{background:#e7ffe8;}
  .tone.neg{background:#ffe7e7;}

  /* 1/2/3ì¹´ë“œ: ê°€ë¡œ ì¤„ */
  .row{
    display:flex;
    gap:14px;
    justify-content:center;
    align-items:flex-start;
    flex-wrap:wrap;
  }

  /* 5ì¹´ë“œ */
  .spread-5{
    display:flex;
    gap:8px;
    justify-content:space-between;
    align-items:flex-start;
    flex-wrap:nowrap;
  }

  /* ì‹­ì ìŠ¤í”„ë ˆë“œ */
  .cross{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:12px;
    max-width:640px;
    margin:0 auto;
  }
  .cross .card{width:100%;max-width:150px;}

  .box{
    margin-top:14px;
    padding:12px;
    border:1px dashed #d7cfff;
    border-radius:12px;
    background:#fbf9ff;
  }
  .small{font-size:12px;line-height:1.35;}
  .list{margin:6px 0 0 0;padding-left:18px;}

  /* ëª¨ë°”ì¼ ìµœì í™” */
  @media (max-width:768px){
    .wrap{padding:16px;}
    h1{font-size:28px;}
    .card{width:100px;}
    .cross .card{max-width:140px;}

    /* 5ì¹´ë“œ: í•œ í™”ë©´ì— ë‹¤ ë“¤ì–´ì˜¤ë„ë¡ ì¶•ì†Œ */
    .spread-5 .card{
      width:17vw;
      max-width:none;
    }
    .spread-5 .caption{
      font-size:11px;
    }
  }
  @media (max-width:480px){
    .card{width:90px;}
    .cross .card{max-width:120px;}
    .spread-5 .card{width:16vw;}
  }
</style>
</head>
<body>

<!-- ğŸ” ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í™”ë©´ -->
<div id="lock-screen" style="min-height:100vh;display:flex;align-items:center;justify-content:center;">
  <div style="background:#ffffff;border-radius:18px;box-shadow:0 8px 24px rgba(0,0,0,.16);padding:24px 20px;max-width:320px;width:90%;text-align:center;">
    <h2 style="margin:0 0 12px;font-size:20px;font-weight:800;color:#2b1560;">NAVI&amp;HUI LENORMAND</h2>
    <p style="margin:0 0 16px;font-size:14px;color:#555;">ì ‘ì† ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
    <input id="pw-input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸"
           style="width:100%;padding:10px 12px;border:1px solid #ded6f8;border-radius:10px;margin-bottom:12px;">
    <button id="pw-btn"
            style="width:100%;padding:10px 0;border:0;border-radius:10px;background:#7c5cff;color:#fff;font-weight:700;cursor:pointer;">
      ì…ì¥í•˜ê¸°
    </button>
    <p id="pw-error" style="margin-top:8px;font-size:12px;color:#d60000;display:none;">ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.</p>
  </div>
</div>

<!-- ğŸ”’ ì‹¤ì œ í˜ì´ì§€ ë‚´ìš© (ë¹„ë°€ë²ˆí˜¸ í†µê³¼ í›„ì—ë§Œ ë³´ì´ê²Œ) -->
<div id="app" style="display:none;">
  <div class="wrap">
    <h1>NAVI&HUI LENORMAND</h1>

    <div class="toolbar">
      <div class="qbox">
        <label><input id="useQ" type="checkbox" /> ì§ˆë¬¸ ì…ë ¥</label>
        <input id="qtext" type="text" placeholder="ì§ˆë¬¸ì„ ì ì–´ ì£¼ì„¸ìš”" />
      </div>
      <button class="btn" onclick="drawN(1,this)">1ì¹´ë“œ</button>
      <button class="btn" onclick="drawN(2,this)">2ì¹´ë“œ</button>
      <button class="btn" onclick="drawN(3,this)">3ì¹´ë“œ</button>
      <button class="btn" onclick="drawN(5,this)">5ì¹´ë“œ</button>
      <button class="btn" onclick="drawCross(this)">+ ì‹­ì</button>
      <!-- âœ… 9x4, 8x4+4 ë²„íŠ¼ì€ ì™„ì „íˆ ì œê±° -->
    </div>

    <div id="stage"></div>
  </div>
</div>

<script>
/* ===== ì¹´ë“œ ë°ì´í„° (ì‚¬ìš©ìê°€ ì¤€ ë²„ì „) ===== */
const CARDS = [
  {num:1, code:"Rider",   kr:"ê¸°ìˆ˜",   key:"ì†Œì‹â€¢ì´ë™",   add:"ë¹ ë¥¸ ë³€í™”Â·ì—°ë½ ë„ì°©", type:"positive"},
  {num:2, code:"Clover",  kr:"í´ë¡œë²„", key:"í–‰ìš´â€¢ê¸°íšŒ",   add:"ì§§ì€ ì°¬ìŠ¤Â·ì‹œë„ ì¢‹ìŒ", type:"positive"},
  {num:3, code:"Ship",    kr:"ì„ ë°•",   key:"ì—¬í–‰â€¢í™•ì¥",   add:"ê´€ê³„Â·í™˜ê²½ ë³€í™”",     type:"neutral"},
  {num:4, code:"House",   kr:"ì§‘",     key:"ê°€ì •â€¢ì•ˆì •",   add:"ê¸°ë°˜ ë‹¤ì§€ê¸°",       type:"neutral"},
  {num:5, code:"Tree",    kr:"ë‚˜ë¬´",   key:"ê±´ê°•â€¢ì„±ì¥",   add:"ì¥ê¸° ì„±ì¥Â·íšŒë³µ",     type:"positive"},
  {num:6, code:"Cloud",   kr:"êµ¬ë¦„",   key:"í˜¼ë€â€¢ë¶ˆí™•ì‹¤", add:"íŒë‹¨ ë³´ë¥˜Â·ì±™ê¸°ê¸°",   type:"negative"},
  {num:7, code:"Snake",   kr:"ë±€",     key:"ìœ í˜¹â€¢ê¸°ë§Œ",   add:"ê²‰ê³¼ì† ë‹¤ë¦„Â·ì£¼ì˜",   type:"negative"},
  {num:8, code:"Coffin",  kr:"ê´€",     key:"ëâ€¢ì „í™˜",     add:"ì •ë¦¬Â·ì¬ì¶œë°œ",       type:"negative"},
  {num:9, code:"Bouquet", kr:"ë¶€ì¼€",   key:"ì„ ë¬¼â€¢ê¸°ì¨",   add:"í˜¸ì˜ ìƒìŠ¹",         type:"positive"},
  {num:10,code:"Scythe",  kr:"ë‚«",     key:"ë‹¨ì ˆâ€¢ê²°ì •",   add:"ë¹ ë¥¸ ì„ íƒ",         type:"negative"},
  {num:11,code:"Whip",    kr:"ì±„ì°",   key:"ê°ˆë“±â€¢ë°˜ë³µ",   add:"ë£¨í”„ ëŠê¸°",         type:"negative"},
  {num:12,code:"Bird",    kr:"ìƒˆ",     key:"ëŒ€í™”â€¢ì†Œë¬¸",   add:"ë§ ë§ì€ ì‹œê¸°",       type:"neutral"},
  {num:13,code:"Child",   kr:"ì•„ì´",   key:"ìƒˆ ì‹œì‘â€¢ìˆœìˆ˜", add:"ì‘ì§€ë§Œ ì„±ì¥ í¼",     type:"positive"},
  {num:14,code:"Fox",     kr:"ì—¬ìš°",   key:"ì¼â€¢ì˜ì‹¬",     add:"ê³„ì•½Â·ì •ë³´ ì¬í™•ì¸",   type:"neutral"},
  {num:15,code:"Bear",    kr:"ê³°",     key:"í˜â€¢ë³´í˜¸",     add:"í›„ì›Â·ë¦¬ë”ì‹­",       type:"positive"},
  {num:16,code:"Stars",   kr:"ë³„",     key:"í¬ë§â€¢ëª©í‘œ",   add:"ë¹„ì „ ëª…í™•",         type:"positive"},
  {num:17,code:"Stork",   kr:"í™©ìƒˆ",   key:"ë³€í™”â€¢ê°œì„ ",   add:"ìŠµê´€ ì—…ë°ì´íŠ¸",     type:"positive"},
  {num:18,code:"Dog",     kr:"ê°œ",     key:"ì‹ ë¢°â€¢ìš°ì •",   add:"ë™ë§¹Â·íŒŒíŠ¸ë„ˆì‹­",     type:"positive"},
  {num:19,code:"Tower",   kr:"íƒ‘",     key:"ì œë„â€¢ë…ë¦½",   add:"í™€ë¡œì„œê¸°",         type:"neutral"},
  {num:20,code:"Garden",  kr:"ì •ì›",   key:"ëª¨ì„â€¢ê³µê°œ",   add:"ì¢‹ì€ í‰íŒ",         type:"positive"},
  {num:21,code:"Mountain",kr:"ì‚°",     key:"ì¥ì• â€¢ì§€ì—°",   add:"ì‹œê°„ í•„ìš”",         type:"negative"},
  {num:22,code:"Crossroad",kr:"ê°ˆë¦¼ê¸¸",key:"ì„ íƒâ€¢ê²°ì •",   add:"ë°ì´í„° ë¹„êµ",       type:"neutral"},
  {num:23,code:"Mice",    kr:"ì¥",     key:"ì†ì‹¤â€¢ì†Œëª¨",   add:"ë¯¸ì„¸ëˆ„ìˆ˜ ì ê²€",     type:"negative"},
  {num:24,code:"Heart",   kr:"í•˜íŠ¸",   key:"ì‚¬ë‘â€¢ê°ì •",   add:"ê°ì • íšŒë³µ",         type:"positive"},
  {num:25,code:"Ring",    kr:"ë°˜ì§€",   key:"ê³„ì•½â€¢ìˆœí™˜",   add:"ì¥ê¸° ì»¤ë°‹",         type:"neutral"},
  {num:26,code:"Book",    kr:"ì±…",     key:"ë¹„ë°€â€¢í•™ìŠµ",   add:"ì •ë³´ ë¯¸ê³µê°œ",       type:"neutral"},
  {num:27,code:"Letter",  kr:"í¸ì§€",   key:"ì—°ë½â€¢ë¬¸ì„œ",   add:"ì¦ê±°Â·í†µë³´",         type:"positive"},
  {num:28,code:"Man",     kr:"ë‚¨ì„±",   key:"í•µì‹¬ ì¸ë¬¼",   add:"ì¤‘ì‹¬ ë‚¨ì„±",         type:"neutral"},
  {num:29,code:"Woman",   kr:"ì—¬ì„±",   key:"í•µì‹¬ ì¸ë¬¼",   add:"ì¤‘ì‹¬ ì—¬ì„±",         type:"neutral"},
  {num:30,code:"Lily",    kr:"ë°±í•©",   key:"í‰í™”â€¢ì„±ìˆ™",   add:"íœ´ì‹Â·í’ˆìœ„",         type:"positive"},
  {num:31,code:"Sun",     kr:"íƒœì–‘",   key:"ì„±ê³µâ€¢í™œë ¥",   add:"ê¸ì • ê²°ê³¼",         type:"positive"},
  {num:32,code:"Moon",    kr:"ë‹¬",     key:"ëª…ì˜ˆâ€¢ê°ì •",   add:"ê°ì • ë¦¬ë“¬",         type:"positive"},
  {num:33,code:"Key",     kr:"ì—´ì‡ ",   key:"í•´ê²°â€¢ì •ë‹µ",   add:"ëŒíŒŒêµ¬",           type:"positive"},
  {num:34,code:"Fish",    kr:"ë¬¼ê³ ê¸°", key:"ì¬ë¬¼â€¢êµë¥˜",   add:"ê±°ë˜ ì¦ê°€",         type:"neutral"},
  {num:35,code:"Anchor",  kr:"ë‹»",     key:"ì•ˆì •â€¢ê³ ì •",   add:"ì§€ì†ì„±",           type:"neutral"},
  {num:36,code:"Cross",   kr:"ì‹­ìê°€", key:"ê³ ë‚œâ€¢ì‹ ë…",   add:"ì±…ì„Â·ë²„í‹°ê¸°",       type:"negative"},
];

/* ì´ë¯¸ì§€ ë¡œë”© (ë ˆë…¸ë¨¼ë“œ-01.png ë“± ìë™ ì‹œë„) */
const IMG_DIR_CANDIDATES = ["","cards/","images/","img/"];
const IMG_EXT_CANDIDATES = [".png",".webp",".jpg",".PNG",".JPG"];
const pad2 = n => String(n).padStart(2,"0");

function makeImg(num){
  const img = document.createElement("img");
  img.dataset.num = num;
  img.dataset.try = 0;
  img.src = encodeURI(`ë ˆë…¸ë¨¼ë“œ-${pad2(num)}.png`);
  img.onerror = function(){ tryNextImg(this); };
  return img;
}
function tryNextImg(img){
  let t = +img.dataset.try;
  const num = img.dataset.num;
  const total = IMG_DIR_CANDIDATES.length * IMG_EXT_CANDIDATES.length;
  if(t >= total){ img.onerror = null; return; }
  const dir = IMG_DIR_CANDIDATES[Math.floor(t / IMG_EXT_CANDIDATES.length)];
  const ext = IMG_EXT_CANDIDATES[t % IMG_EXT_CANDIDATES.length];
  img.dataset.try = t + 1;
  img.src = encodeURI(`${dir}ë ˆë…¸ë¨¼ë“œ-${pad2(num)}${ext}`);
}

/* ìœ í‹¸ */
function toneBadge(type){
  if(type === "positive") return '<span class="tone pos">ğŸ”µ ê¸ì •</span>';
  if(type === "negative") return '<span class="tone neg">ğŸ”´ ë¶€ì •</span>';
  return '<span class="tone neu">ğŸŸ¢ ì¤‘ë¦½</span>';
}

function makeTile(card, onClick=null, showCaption=true){
  const root = document.createElement("div");
  root.className = "item";

  const cardDiv = document.createElement("div");
  cardDiv.className = "card";
  cardDiv.appendChild(makeImg(card.num));
  root.appendChild(cardDiv);

  if(showCaption){
    const cap = document.createElement("div");
    cap.className = "caption";
    cap.innerHTML =
      `<b>${card.num}. ${card.code}</b><br>`+
      `${toneBadge(card.type)}<br>`+
      `${card.key}<br>`+
      `<span class="muted">${card.add}</span>`;
    root.appendChild(cap);
  }

  if(onClick) root.onclick = onClick;
  return root;
}

function shuffle(arr){
  return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);
}

function setOn(btn){
  document.querySelectorAll(".btn").forEach(b=>b.classList.remove("on"));
  if(btn) btn.classList.add("on");
}

function questionHTML(){
  const use = document.getElementById("useQ").checked;
  const q = document.getElementById("qtext").value.trim();
  if(!use || !q) return "";
  return `<div class="box small"><b>ì§ˆë¬¸:</b> ${q}</div>`;
}

/* ìš”ì•½ */
function summarize(cards){
  const score = {positive:0,negative:0,neutral:0};
  cards.forEach(c => { score[c.type]++; });
  const top = Object.entries(score).sort((a,b)=>b[1]-a[1])[0][0];

  let toneTxt = "";
  let interp = "";
  let advice = "";
  if(top === "positive"){
    toneTxt = "ğŸ”µ ê¸ì •";
    interp = "ì „ë°˜ì ìœ¼ë¡œ íë¦„ì´ ìš°í˜¸ì ì…ë‹ˆë‹¤. ì¶”ì§„/í™•ëŒ€Â·íšŒë³µÂ·í•©ì˜ì˜ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.";
    advice = "ê¸°íšŒê°€ ì™”ì„ ë•Œ ê³¼ê°íˆ ì¡ë˜, ì¼ì •/ì¡°ê±´ì„ ëª…í™•íˆ í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”.";
  }else if(top === "negative"){
    toneTxt = "ğŸ”´ ë¶€ì •";
    interp = "ê²½ê³  ì‹ í˜¸ê°€ ëšœë ·í•©ë‹ˆë‹¤. ë‹¨ì ˆ/ì§€ì—°/ì†Œëª¨ ì´ìŠˆì— ëŒ€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
    advice = "ë¬´ë¦¬í•œ í™•ì¥ì€ í”¼í•˜ê³  ë¦¬ìŠ¤í¬ ê´€ë¦¬Â·ì •ë¦¬Â·ë³´ìˆ˜ì  ì„ íƒì„ ìš°ì„ í•˜ì„¸ìš”.";
  }else{
    toneTxt = "ğŸŸ¢ ì¤‘ë¦½";
    interp = "ìƒí™©ì´ ì—‡ê°ˆë¦½ë‹ˆë‹¤. ì„œë‘ë¥´ê¸°ë³´ë‹¤ ì •ë³´ í™•ì¸ì´ ìš°ì„ ì…ë‹ˆë‹¤.";
    advice = "ì˜µì…˜ì„ ë¹„êµÂ·ê²€ì¦í•œ ë’¤ ì‘ê²Œ ì‹œì‘í•˜ê±°ë‚˜ ìœ ë³´í•˜ëŠ” ì „ëµì´ ìœ ë¦¬í•©ë‹ˆë‹¤.";
  }
  return {toneTxt, interp, advice};
}

/* ë©”ì¸ ìŠ¤í…Œì´ì§€ */
const stage = document.getElementById("stage");

/* Nì¥ ë½‘ê¸° (1,2,3,5) */
function drawN(n,btn){
  setOn(btn);
  const pick = shuffle([...CARDS]).slice(0,n);
  stage.innerHTML = "";
  stage.insertAdjacentHTML("beforeend", questionHTML());

  if(n === 5){
    const row = document.createElement("div");
    row.className = "spread-5";
    pick.forEach(c => row.appendChild(makeTile(c)));
    stage.appendChild(row);

    const sum = summarize(pick);
    stage.insertAdjacentHTML("beforeend",
      `<div class="box small"><b>5ì¹´ë“œ ìš”ì•½</b><br>`+
      `ì „ì²´ í†¤: ${sum.toneTxt}<br>`+
      `í•´ì„: ${sum.interp}<br>`+
      `ê¶Œê³ : ${sum.advice}</div>`
    );
  }else{
    const row = document.createElement("div");
    row.className = "row";
    pick.forEach(c => row.appendChild(makeTile(c)));
    stage.appendChild(row);
  }
}

/* ì‹­ì ìŠ¤í”„ë ˆë“œ */
function drawCross(btn){
  setOn(btn);
  const cs = shuffle([...CARDS]).slice(0,5);
  stage.innerHTML = "";
  stage.insertAdjacentHTML("beforeend", questionHTML());

  const g = document.createElement("div");
  g.className = "cross";
  g.appendChild(document.createElement("div"));
  g.appendChild(makeTile(cs[0]));
  g.appendChild(document.createElement("div"));
  g.appendChild(makeTile(cs[1]));
  g.appendChild(makeTile(cs[2]));
  g.appendChild(makeTile(cs[3]));
  g.appendChild(document.createElement("div"));
  g.appendChild(makeTile(cs[4]));
  g.appendChild(document.createElement("div"));
  stage.appendChild(g);
}

/* ğŸ” ì•„ì£¼ ê°„ë‹¨í•œ ë¹„ë°€ë²ˆí˜¸ ì ê¸ˆ (ëˆˆê°€ë¦¼ìš©) */
(function(){
  const PASSWORD = "gnskgnsk";   // ì‚¬ìš©ìê°€ ì§€ì •í•œ ë¹„ë°€ë²ˆí˜¸

  const lock  = document.getElementById("lock-screen");
  const app   = document.getElementById("app");
  const input = document.getElementById("pw-input");
  const btn   = document.getElementById("pw-btn");
  const error = document.getElementById("pw-error");

  function unlock(){
    const val = input.value.trim();
    if(val === PASSWORD){
      lock.style.display = "none";
      app.style.display  = "block";
      error.style.display = "none";
      input.value = "";
    }else{
      error.style.display = "block";
    }
  }

  btn.addEventListener("click", unlock);
  input.addEventListener("keydown", e=>{
    if(e.key === "Enter") unlock();
  });
})();
</script>
</body>
</html>
