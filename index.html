<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>NABY&MOONHONG LENORMAND ORACLE</title>

<style>
  :root{
    --bg:#ede6ff;
    --panel:#f7f2ff;
    --panel2:#ffffff;
    --text:#3c2f62;
    --muted:#7e72a3;
    --ring:#c6b9e9;
    --shadow:0 6px 16px rgba(80,60,130,.18);
  }
  body{
    margin:0;
    background:var(--bg);
    font-family:system-ui, sans-serif;
    color:var(--text);
  }
  header{
    position:sticky;top:0;
    background:rgba(255,255,255,.7);
    backdrop-filter:blur(6px);
    padding:14px;
    border-bottom:1px solid var(--ring);
    z-index:10;
  }
  h1{margin:0;font-size:22px;color:#493c7b}
  .container{max-width:1150px;margin:0 auto;padding:16px;}
  .btn{
    background:var(--panel);
    border:1px solid var(--ring);
    padding:8px 14px;
    border-radius:8px;
    cursor:pointer;
    font-size:14px;
    color:var(--text);
    transition:.15s;
  }
  .btn:hover{box-shadow:0 2px 6px rgba(0,0,0,.1)}

  .card,.card-mini{
    background:var(--panel2);
    border:1px solid var(--ring);
    border-radius:10px;
    position:relative;
    padding:10px;
    box-shadow:var(--shadow);
  }

  .img-box{
    width:100%;
    aspect-ratio:3/4;
    background:#fff;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    margin-bottom:6px;
  }
  .img-box img{
    width:100%;
    height:100%;
    object-fit:contain;
  }

  .grid{
    display:grid;
    gap:14px;
    padding:10px 0;
    grid-template-columns:repeat(auto-fill,minmax(230px,1fr));
  }

  .drawbox{
    background:var(--panel);
    border:1px solid var(--ring);
    border-radius:10px;
    padding:14px;
    box-shadow:var(--shadow);
    margin-bottom:16px;
  }

  .draw-result{display:grid;gap:12px;margin-top:12px;}
  .triple{grid-template-columns:repeat(3,1fr);}
  .five{grid-template-columns:repeat(5,minmax(120px,1fr));overflow-x:auto;}

  .type-badge{
    position:absolute;
    top:6px;right:6px;
    font-size:12px;
    padding:2px 6px;
    border-radius:999px;
    background:rgba(0,0,0,.20);
    color:#fff;
  }

  .card-positive{border:2px solid #4cc3ff;}
  .card-negative{border:2px solid #ff6b6b;}
  .card-neutral{border:2px solid #7df58e;}

  #drawSummary{
    margin-top:10px;
    border:1px dashed var(--ring);
    padding:10px;
    border-radius:8px;
    background:var(--panel2);
    box-shadow:var(--shadow);
    color:var(--muted);
  }

  .cross-wrap{
    display:grid;
    grid-template-areas:
      ". c1 ."
      "c2 c3 c4"
      ". c5 .";
    grid-template-columns:1fr 1fr 1fr;
    gap:10px;
    max-width:420px;
    margin:0 auto;
  }
  .pos1{grid-area:c1}
  .pos2{grid-area:c2}
  .pos3{grid-area:c3}
  .pos4{grid-area:c4}
  .pos5{grid-area:c5}

  input[type="text"],input[type="search"]{
    width:100%;
    padding:10px;
    border:1px solid var(--ring);
    border-radius:8px;
    background:var(--panel2);
    color:var(--text);
    margin-top:8px;
  }
</style>
</head>

<body>
<header><h1>NABY LENORMAND ORACLE</h1></header>

<div class="container">

<section class="drawbox">
  <div style="display:flex;flex-wrap:wrap;gap:10px;align-items:center">
    <label style="font-size:12px"><input id="toggleQ" type="checkbox"> ì§ˆë¬¸ ì…ë ¥</label>
    <input id="inputQ" type="text" placeholder="ì§ˆë¬¸ (ì„ íƒ)" style="display:none">

    <button class="btn" id="btn1">ğŸƒ 1ì¹´ë“œ</button>
    <button class="btn" id="btn3">ğŸƒğŸƒğŸƒ 3ì¹´ë“œ</button>
    <button class="btn" id="btn5">ğŸƒğŸƒğŸƒğŸƒğŸƒ 5ì¹´ë“œ</button>
    <button class="btn" id="btnCross">âœš ì‹­ì</button>
    <button class="btn" id="btnGT94">ğŸ§© 9Ã—4</button>
    <button class="btn" id="btnGT84">ğŸ§© 8Ã—4+4</button>
  </div>

  <div id="qBox" style="margin-top:5px;color:var(--muted)"></div>
  <div id="drawArea" class="draw-result"></div>
  <div id="drawSummary" class="hidden"></div>
</section>

<button class="btn" id="toggleList">ğŸ“‚ ì¹´ë“œ ì „ì²´ ë³´ê¸°</button>
<input id="search" type="search" placeholder="ì¹´ë“œ ê²€ìƒ‰ (ë²ˆí˜¸/ì´ë¦„)">
<div id="grid" class="grid" style="display:none"></div>

</div>

<footer class="container" style="padding:40px 8px;text-align:center;color:var(--muted);border-top:1px solid var(--ring);margin-top:30px">
  ìë£Œ ì¶œì²˜: NABY LENORMAND ORACLE CARD<br>
  ì œì‘ : ë‚˜ë¹„ğŸ¦‹, ì›”í™ğŸŒ™
</footer>

<script>
function imgPath(num){
  const n = num < 10 ? `0${num}` : num;
  return `images/ë ˆë…¸ë¨¼ë“œ-${n}.png`;
}

const CARDS = [
  {num:1, code:"Rider", kr:"ê¸°ìˆ˜", key:"ì†Œì‹â€¢ì´ë™", add:"ë¹ ë¥¸ ë³€í™”Â·ì—°ë½ ë„ì°©", type:"positive"},
  {num:2, code:"Clover", kr:"í´ë¡œë²„", key:"í–‰ìš´â€¢ê¸°íšŒ", add:"ì§§ì€ ì°¬ìŠ¤Â·ì‹œë„ ì¢‹ìŒ", type:"positive"},
  {num:3, code:"Ship", kr:"ì„ ë°•", key:"ì—¬í–‰â€¢í™•ì¥", add:"ê´€ê³„Â·í™˜ê²½ ë³€í™”", type:"neutral"},
  {num:4, code:"House", kr:"ì§‘", key:"ê°€ì •â€¢ì•ˆì •", add:"ê¸°ë°˜ ë‹¤ì§€ê¸°", type:"neutral"},
  {num:5, code:"Tree", kr:"ë‚˜ë¬´", key:"ê±´ê°•â€¢ì„±ì¥", add:"ì¥ê¸° ì„±ì¥Â·íšŒë³µ", type:"positive"},
  {num:6, code:"Cloud", kr:"êµ¬ë¦„", key:"í˜¼ë€â€¢ë¶ˆí™•ì‹¤", add:"íŒë‹¨ ë³´ë¥˜Â·ì±™ê¸°ê¸°", type:"negative"},
  {num:7, code:"Snake", kr:"ë±€", key:"ìœ í˜¹â€¢ê¸°ë§Œ", add:"ê²‰ê³¼ì† ë‹¤ë¦„Â·ì£¼ì˜", type:"negative"},
  {num:8, code:"Coffin", kr:"ê´€", key:"ëâ€¢ì „í™˜", add:"ì •ë¦¬Â·ì¬ì¶œë°œ", type:"negative"},
  {num:9, code:"Bouquet", kr:"ë¶€ì¼€", key:"ê¸°ì¨â€¢ì„ ë¬¼", add:"í˜¸ì˜ ìƒìŠ¹", type:"positive"},
  {num:10, code:"Scythe", kr:"ë‚«", key:"ë‹¨ì ˆâ€¢ê²°ì •", add:"ë¹ ë¥¸ ì„ íƒ", type:"negative"},
  {num:11, code:"Whip", kr:"ì±„ì°", key:"ê°ˆë“±â€¢ë°˜ë³µ", add:"ë£¨í”„ ëŠê¸°", type:"negative"},
  {num:12, code:"Bird", kr:"ìƒˆ", key:"ëŒ€í™”â€¢ì†Œë¬¸", add:"ë§ ë§ì€ ì‹œê¸°", type:"neutral"},
  {num:13, code:"Child", kr:"ì•„ì´", key:"ìƒˆ ì‹œì‘â€¢ìˆœìˆ˜", add:"ì‘ì§€ë§Œ ì„±ì¥ í¼", type:"positive"},
  {num:14, code:"Fox", kr:"ì—¬ìš°", key:"ì¼â€¢ì˜ì‹¬", add:"ê³„ì•½Â·ì •ë³´ ì¬í™•ì¸", type:"neutral"},
  {num:15, code:"Bear", kr:"ê³°", key:"í˜â€¢ë³´í˜¸", add:"í›„ì›Â·ë¦¬ë”ì‹­", type:"positive"},
  {num:16, code:"Stars", kr:"ë³„", key:"í¬ë§â€¢ëª©í‘œ", add:"ë¹„ì „ ëª…í™•", type:"positive"},
  {num:17, code:"Stork", kr:"í™©ìƒˆ", key:"ë³€í™”â€¢ê°œì„ ", add:"ìŠµê´€ ì—…ë°ì´íŠ¸", type:"positive"},
  {num:18, code:"Dog", kr:"ê°œ", key:"ì‹ ë¢°â€¢ìš°ì •", add:"ë™ë§¹Â·íŒŒíŠ¸ë„ˆì‹­", type:"positive"},
  {num:19, code:"Tower", kr:"íƒ‘", key:"ì œë„â€¢ë…ë¦½", add:"í™€ë¡œì„œê¸°", type:"neutral"},
  {num:20, code:"Garden", kr:"ì •ì›", key:"ëª¨ì„â€¢ê³µê°œ", add:"ì¢‹ì€ í‰íŒ", type:"positive"},
  {num:21, code:"Mountain", kr:"ì‚°", key:"ì¥ì• â€¢ì§€ì—°", add:"ì‹œê°„ í•„ìš”", type:"negative"},
  {num:22, code:"Crossroad", kr:"ê°ˆë¦¼ê¸¸", key:"ì„ íƒâ€¢ê²°ì •", add:"ë°ì´í„° ë¹„êµ", type:"neutral"},
  {num:23, code:"Mice", kr:"ì¥", key:"ì†ì‹¤â€¢ì†Œëª¨", add:"ë¯¸ì„¸ëˆ„ìˆ˜ ì ê²€", type:"negative"},
  {num:24, code:"Heart", kr:"í•˜íŠ¸", key:"ì‚¬ë‘â€¢ê°ì •", add:"ê°ì • íšŒë³µ", type:"positive"},
  {num:25, code:"Ring", kr:"ë°˜ì§€", key:"ê³„ì•½â€¢ìˆœí™˜", add:"ì¥ê¸° ì»¤ë°‹", type:"neutral"},
  {num:26, code:"Book", kr:"ì±…", key:"ë¹„ë°€â€¢í•™ìŠµ", add:"ì •ë³´ ë¯¸ê³µê°œ", type:"neutral"},
  {num:27, code:"Letter", kr:"í¸ì§€", key:"ì—°ë½â€¢ë¬¸ì„œ", add:"ì¦ê±°Â·í†µë³´", type:"positive"},
  {num:28, code:"Man", kr:"ë‚¨ì„±", key:"í•µì‹¬ ì¸ë¬¼", add:"ì¤‘ì‹¬ ë‚¨ì„±", type:"neutral"},
  {num:29, code:"Woman", kr:"ì—¬ì„±", key:"í•µì‹¬ ì¸ë¬¼", add:"ì¤‘ì‹¬ ì—¬ì„±", type:"neutral"},
  {num:30, code:"Lily", kr:"ë°±í•©", key:"í‰í™”â€¢ì„±ìˆ™", add:"íœ´ì‹Â·í’ˆìœ„", type:"positive"},
  {num:31, code:"Sun", kr:"íƒœì–‘", key:"ì„±ê³µâ€¢í™œë ¥", add:"ê¸ì • ê²°ê³¼", type:"positive"},
  {num:32, code:"Moon", kr:"ë‹¬", key:"ëª…ì˜ˆâ€¢ê°ì •", add:"ê°ì • ë¦¬ë“¬", type:"positive"},
  {num:33, code:"Key", kr:"ì—´ì‡ ", key:"í•´ê²°â€¢ì •ë‹µ", add:"ëŒíŒŒêµ¬", type:"positive"},
  {num:34, code:"Fish", kr:"ë¬¼ê³ ê¸°", key:"ì¬ë¬¼â€¢êµë¥˜", add:"êµë¥˜Â·ê±°ë˜ ì¦ê°€", type:"neutral"},
  {num:35, code:"Anchor", kr:"ë‹»", key:"ì•ˆì •â€¢ê³ ì •", add:"ì§€ì†ì„±", type:"neutral"},
  {num:36, code:"Cross", kr:"ì‹­ìê°€", key:"ê³ ë‚œâ€¢ì‹ ë…", add:"ì±…ì„Â·ë²„í‹°ê¸°", type:"negative"},
];

const grid=document.getElementById("grid");
const drawArea=document.getElementById("drawArea");
const toggleQ=document.getElementById("toggleQ");
const inputQ=document.getElementById("inputQ");
const qBox=document.getElementById("qBox");

const typeClass = t => t==="positive"?"card-positive":(t==="negative"?"card-negative":"card-neutral");
const typeEmoji = t => t==="positive"?"ğŸ”µ":(t==="negative"?"ğŸ”´":"ğŸŸ¢");

function loadList(list){
  grid.innerHTML="";
  list.forEach(c=>{
    let div=document.createElement("div");
    div.className="card "+typeClass(c.type);
    div.innerHTML=`
      <span class="type-badge">${typeEmoji(c.type)}</span>
      <div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p>
      <p><em>${c.key}</em> â€” ${c.add}</p>
    `;
    grid.appendChild(div);
  });
}
loadList(CARDS);

let open=false;
document.getElementById("toggleList").onclick=()=>{
  open=!open;
  grid.style.display=open?"grid":"none";
  document.getElementById("toggleList").textContent=open?"ğŸ“ ì¹´ë“œ ì ‘ê¸°":"ğŸ“‚ ì¹´ë“œ ì „ì²´ ë³´ê¸°";
};

document.getElementById("search").oninput=e=>{
  const v=e.target.value.toLowerCase();
  loadList(CARDS.filter(c=>
    c.code.toLowerCase().includes(v) ||
    c.kr.includes(v) ||
    (c.num+"").includes(v)
  ));
};

toggleQ.onchange=()=>{
  inputQ.style.display=toggleQ.checked?"block":"none";
  if(!toggleQ.checked){inputQ.value="";qBox.textContent="";}
};

/* âœ… 5ì¹´ë“œ ìƒì„¸ ìë™ í•´ì„ */
function buildFiveSummary(cards, q){
  const pos=cards.filter(c=>c.type==='positive').length;
  const neg=cards.filter(c=>c.type==='negative').length;
  const neu=cards.filter(c=>c.type==='neutral').length;

  let tone='';
  if(pos>neg)      tone = `ì „ì²´ í†¤: ğŸ”µ ìš°í˜¸ì  (ê¸ì • ${pos} / ë¶€ì • ${neg} / ì¤‘ë¦½ ${neu})`;
  else if(neg>pos) tone = `ì „ì²´ í†¤: ğŸ”´ ì‹ ì¤‘(ë³´ìˆ˜) (ê¸ì • ${pos} / ë¶€ì • ${neg} / ì¤‘ë¦½ ${neu})`;
  else             tone = `ì „ì²´ í†¤: ğŸŸ¢ ê· í˜•(ì¤‘ë¦½) (ê¸ì • ${pos} / ë¶€ì • ${neg} / ì¤‘ë¦½ ${neu})`;

  const has = n => cards.some(c=>c.code===n);
  const highlights=[];
  if(has('Sun')||has('Key')||has('Bouquet'))
    highlights.push(`ì¶”ì§„ ì‹ í˜¸ â€” ê²°ê³¼ ê°€ì‹œí™” / í•´ê²°ì˜ ì‹¤ë§ˆë¦¬`);
  if(has('Mountain')||has('Scythe')||has('Coffin')||has('Snake')||has('Cloud'))
    highlights.push(`ë¦¬ìŠ¤í¬ â€” ì§€ì—°Â·ë‹¨ì ˆÂ·í˜¼ì„  ê°€ëŠ¥, ì¼ì • ì¡°ì •`);
  if(has('Ring')||has('Letter')||has('Garden')||has('Tower'))
    highlights.push(`ê³„ì•½Â·ë¬¸ì„œÂ·ê³µì  ì˜ì—­ ì²´í¬`);
  if(has('Fish')||has('Bear')||has('Anchor'))
    highlights.push(`ì¬ì • / ìì› ì ê²€`);

  let advice='';
  if(neg>pos){
    advice = 'ê¶Œê³ : ë¦¬ìŠ¤í¬ ìš°ì„  ì •ë¦¬. ì •ë³´ ì¬í™•ì¸, ì¼ì • ì¡°ì •, ì‘ì€ ì„±ê³¼ë¶€í„°.';
    if(has('Crossroad')) advice += ' ì„ íƒì€ ë‹¨ìˆœí™”ê°€ ìœ ë¦¬.';
    if(has('Fox')) advice += ' ê³„ì•½Â·ë¬¸êµ¬ ì„¸ë¶€ í™•ì¸.';
  } else if(pos>neg){
    advice = 'ê¶Œê³ : ìš°í˜¸ì . ë“¤ì–´ì˜¨ ì œì•ˆ/ì—°ë½ í™œìš©, ì†ë„ ë‚´ê¸°.';
    if(has('Rider')) advice += ' ë¹ ë¥¸ ì‘ë‹µì´ ê¸°íšŒ.';
    if(has('Stork')) advice += ' êµ¬ì¡°Â·ìŠµê´€ ì—…ë°ì´íŠ¸.';
  } else {
    advice = 'ê¶Œê³ : ë‹¹ì¥ ê²°ë¡ ë³´ë‹¤ ë°ì´í„° ì •ë¦¬Â·ìš°ì„ ìˆœìœ„ ì„¸íŒ….';
    if(has('Book')) advice += ' ì¶”ê°€ ìë£Œ í™•ë³´ë¡œ í™•ì‹ ë„ ìƒìŠ¹.';
  }

  let qline = q && q.trim() ? `ì§ˆë¬¸: â€œ${q.trim()}â€` : '';

  return `
    <div><strong>${tone}</strong></div>
    ${qline?`<div style="margin-top:4px">${qline}</div>`:''}
    ${highlights.length?'<ul style="margin:6px 0 0 18px">'+highlights.map(h=>`<li>${h}</li>`).join('')+'</ul>':''}
    <div style="margin-top:6px">${advice}</div>
  `;
}

/* âœ… ë½‘ê¸° */
function pick(n){
  const arr=[]; for(let i=0;i<n;i++) arr.push(CARDS[Math.floor(Math.random()*CARDS.length)]);
  if(toggleQ.checked && inputQ.value.trim()) qBox.textContent="ì§ˆë¬¸: "+inputQ.value.trim(); else qBox.textContent="";

  drawArea.classList.remove("triple","five");
  const sum=document.getElementById("drawSummary");
  sum.classList.add("hidden"); sum.innerHTML="";

  if(n===3) drawArea.classList.add("triple");
  if(n===5) drawArea.classList.add("five");

  drawArea.innerHTML="";
  arr.forEach(c=>{
    const el=document.createElement("div");
    el.className="card-mini "+typeClass(c.type);
    el.innerHTML=`
      <span class="type-badge">${typeEmoji(c.type)}</span>
      <div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p>
      <p><em>${c.key}</em> â€” ${c.add}</p>
    `;
    drawArea.appendChild(el);
  });

  if(n===5){
    const html = buildFiveSummary(arr, (toggleQ.checked?inputQ.value:'') );
    sum.innerHTML = html;
    sum.classList.remove("hidden");
  }
}

document.getElementById("btn1").onclick=()=>pick(1);
document.getElementById("btn3").onclick=()=>pick(3);
document.getElementById("btn5").onclick=()=>pick(5);

/* âœ… ì‹­ì ìŠ¤í”„ë ˆë“œ */
document.getElementById("btnCross").onclick=()=>{
  const arr=[];for(let i=0;i<5;i++) arr.push(CARDS[Math.floor(Math.random()*CARDS.length)]);
  drawArea.innerHTML="";
  document.getElementById("drawSummary").classList.add("hidden");

  const role=["í˜„ì¬/í•µì‹¬","ì¥ì• ","ë³¸ì§ˆ","ì¡°ì–¸","ê²°ê³¼"];
  let html=`<div class="cross-wrap">`;
  arr.forEach((c,i)=>{
    html+=`
    <div class="card-mini ${typeClass(c.type)} pos${i+1}">
      <span class="type-badge">${typeEmoji(c.type)}</span>
      <div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p>
      <p><em>${role[i]}</em> â€” ${c.key}, ${c.add}</p>
    </div>`;
  });
  html+=`</div>`;
  drawArea.innerHTML=html;
};

/* âœ… ê·¸ë‘íƒ€ë¸”ë¡œ */
const byNum=new Map(CARDS.map(c=>[c.num,c]));
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

document.getElementById("btnGT94").onclick=()=>{
  const order=shuffle([...Array(36)].map((_,i)=>i+1));
  drawArea.innerHTML="";
  document.getElementById("drawSummary").classList.add("hidden");
  drawArea.innerHTML=`<div style="display:grid;gap:8px;grid-template-columns:repeat(9,1fr)">
  ${order.map(n=>{
    const c=byNum.get(n);
    return `<div class="card-mini">
      <div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p>
    </div>`
  }).join("")}
  </div>`;
};

document.getElementById("btnGT84").onclick=()=>{
  const order=shuffle([...Array(36)].map((_,i)=>i+1));
  drawArea.innerHTML="";
  document.getElementById("drawSummary").classList.add("hidden");
  const top=order.slice(0,32), last=order.slice(32);
  drawArea.innerHTML=`
  <div style="display:grid;gap:8px;grid-template-columns:repeat(8,1fr)">
    ${top.map(n=>{
      const c=byNum.get(n);
      return `<div class="card-mini"><div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p></div>`
    }).join("")}
  </div>
  <div style="display:grid;gap:8px;grid-template-columns:repeat(4,1fr);max-width:700px;margin:0 auto">
    ${last.map(n=>{
      const c=byNum.get(n);
      return `<div class="card-mini"><div class="img-box"><img src="${imgPath(c.num)}"></div>
      <p><strong>${c.num}. ${c.code}</strong> (${c.kr})</p></div>`
    }).join("")}
  </div>`;
};
</script>

</body>
</html>
