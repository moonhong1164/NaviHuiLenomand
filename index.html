<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAVI&HUI LENORMAND</title>
<meta name="description" content="NAVI&HUI Lenormand â€” 1/3/5ì¹´ë“œ, ì‹­ì, 9x4, 8x4+4 ìŠ¤í”„ë ˆë“œ"/>
<style>
  :root{
    --bg:#efe7ff; --panel:#f7f2ff; --ink:#271d33; --muted:#6a5e7a;
    --brand:#5a46a3; --ring:#d8cdf4; --shadow:0 10px 30px rgba(0,0,0,.08);
    --pos:#2f6bff; --neg:#ff3b3b; --neu:#16a34a;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,"Noto Sans KR",sans-serif}
  header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(255,255,255,.8),rgba(255,255,255,.3));backdrop-filter:blur(6px);border-bottom:1px solid var(--ring)}
  .container{max-width:1100px;margin:0 auto;padding:16px}
  h1{margin:0;font-weight:800;letter-spacing:.4px;color:#3f2f86}

  .panel{background:var(--panel);border:1px solid var(--ring);border-radius:16px;box-shadow:var(--shadow);padding:14px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .btn{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--ring);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{padding:4px 10px;border-radius:999px;background:#fff;border:1px solid var(--ring);color:var(--muted);font-size:12px}

  .cards-row{display:flex;gap:12px;flex-wrap:nowrap;justify-content:center}
  .card{width:180px;max-width:180px;background:#fff;border:1px solid var(--ring);border-radius:16px;box-shadow:var(--shadow);padding:10px}
  .card .img{display:block;width:100%;height:auto;border-radius:10px;box-shadow:0 4px 14px rgba(0,0,0,.06)}
  .card h4{margin:10px 0 2px;font-size:18px}
  .kw{color:var(--muted);margin:0 0 6px}
  .pin{position:absolute;right:10px;top:10px;width:14px;height:14px;border-radius:50%;box-shadow:0 0 0 3px #fff}
  .pin.pos{background:var(--pos)} .pin.neg{background:var(--neg)} .pin.neu{background:var(--neu)}
  .tone{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:12px;color:#fff}
  .tone.pos{background:var(--pos)} .tone.neg{background:var(--neg)} .tone.neu{background:var(--neu)}
  .tone .emo{font-size:13px}

  .summary-box{margin-top:14px;background:#fff;border:1px solid var(--ring);border-radius:14px;padding:12px 14px}
  .summary-box h5{margin:0 0 6px;font-size:15px;color:#2c2158}
  .summary-box ul{margin:6px 0 0 1.2rem;padding:0}
  .summary-box li{margin:.25rem 0}

  /* â”€â”€ ì‹­ì: 3Ã—3 ê·¸ë¦¬ë“œ(í–‰ë†’ì´ ê³ ì • ì œê±°, ê²¹ì¹¨ ë°©ì§€) â”€â”€ */
  .cross-wrap{display:grid;gap:10px;justify-content:center}
  .cross-grid{
    display:grid;gap:10px;justify-content:center;
    grid-template-areas:
      ". n ."
      "w c e"
      ". s .";
    grid-template-columns:repeat(3,minmax(0,1fr));
  }
  .pos-n{grid-area:n} .pos-s{grid-area:s}
  .pos-w{grid-area:w} .pos-e{grid-area:e}
  .pos-c{grid-area:c}
  .cross-grid .card{width:100%;max-width:none}

  /* â”€â”€ ê·¸ë‘íƒ€ë¸”ë¡œ â”€â”€ */
  .gt-wrap{overflow:hidden}
  .gt-grid{display:grid;gap:6px;justify-content:center}
  .gt-grid .card{position:relative}

  /* ===== ëª¨ë°”ì¼ ìë™ ì¶•ì†Œ ===== */
  @media (max-width:768px){
    /* 3ì¹´ë“œ / 5ì¹´ë“œ */
    [data-spread="3"] .card{width:calc((100vw - 48px - 2*12px)/3);max-width:none}
    [data-spread="5"] .card{width:calc((100vw - 48px - 4*10px)/5);max-width:none}
    [data-spread="3"] .cards-row{gap:12px}
    [data-spread="5"] .cards-row{gap:10px}

    /* ì‹­ì: ì…€ í¬ê¸°ë§Œ ê·œì •, í–‰ë†’ì´ ìë™(ê²¹ì¹¨ ì—†ìŒ) */
    [data-spread="cross"] .cross-grid{
      --cell: calc((100vw - 56px - 2*12px)/3);
      grid-template-columns:repeat(3,var(--cell));
    }

    /* 9Ã—4 */
    [data-spread="gt-9x4"] .gt-grid{
      --w: calc((100vw - 32px - 8*6px)/9);
      grid-template-columns:repeat(9,var(--w));
    }
    [data-spread="gt-9x4"] .card{width:var(--w);max-width:none}

    /* 8Ã—4+4 ë³¸íŒ */
    [data-spread="gt-8x4"] .gt-grid{
      --w: calc((100vw - 32px - 7*6px)/8);
      grid-template-columns:repeat(8,var(--w));
    }
    [data-spread="gt-8x4"] .card{width:var(--w);max-width:none}

    /* GTëŠ” ì´ë¯¸ì§€ ì¤‘ì‹¬: í…ìŠ¤íŠ¸/ë°°ì§€ ìˆ¨ê¹€ + ì—¬ë°± ì¶•ì†Œ */
    [data-spread^="gt-"] .card{padding:6px}
    [data-spread^="gt-"] .card h4,
    [data-spread^="gt-"] .card .kw,
    [data-spread^="gt-"] .card .tone{display:none}
  }

  footer{color:var(--muted);text-align:center;padding:28px 10px}
</style>
</head>
<body>
<header><div class="container"><h1>NAVI&HUI LENORMAND</h1></div></header>

<main class="container" style="padding-top:8px;padding-bottom:24px">
  <section class="panel">
    <div class="row">
      <label class="chip"><input id="qToggle" type="checkbox"> ì§ˆë¬¸ ì…ë ¥</label>
      <input id="qInput" type="search" placeholder="ì§ˆë¬¸ì„ ì ì–´ ì£¼ì„¸ìš” (ì„ íƒ)" style="display:none;padding:8px 10px;border:1px solid var(--ring);border-radius:10px;background:#fff"/>
      <button class="btn" id="btn1">ğŸƒ 1ì¹´ë“œ</button>
      <button class="btn" id="btn3">ğŸƒğŸƒğŸƒ 3ì¹´ë“œ</button>
      <button class="btn" id="btn5">ğŸƒğŸƒğŸƒğŸƒğŸƒ 5ì¹´ë“œ</button>
      <button class="btn" id="btnCross">â• ì‹­ì</button>
      <button class="btn" id="btnGT">ğŸ§© 9Ã—4</button>
      <button class="btn" id="btnGT84">ğŸ§© 8Ã—4+4</button>
    </div>
  </section>

  <section id="result" style="margin-top:16px;display:grid;gap:18px"></section>

  <div class="row" style="margin-top:10px">
    <button class="btn" id="btnList">ğŸ“ ì¹´ë“œ ì „ì²´ ë³´ê¸°</button>
    <input id="search" type="search" placeholder="ì¹´ë“œ ê²€ìƒ‰ (ë²ˆí˜¸/ì´ë¦„)" style="flex:1;min-width:200px;padding:8px 10px;border:1px solid var(--ring);border-radius:10px;background:#fff"/>
  </div>

  <section id="gridAll" style="display:none;margin-top:14px" class="panel">
    <div class="chips" id="allChips"></div>
    <div id="allCards" class="cards-row" style="flex-wrap:wrap;justify-content:flex-start"></div>
  </section>
</main>

<footer>ì œì‘ : ë‚˜ë¹„ğŸ¦‹, ì›”í™ğŸŒ™</footer>

<script>
/* ==== ë°ì´í„° ==== */
const CARDS = [
  {n:1,en:'Rider',ko:'ê¸°ìˆ˜',kw:'ì†Œì‹Â·ë„ì°©Â·ì´‰ì§„',tone:'pos'},
  {n:2,en:'Clover',ko:'í´ë¡œë²„',kw:'ê¸°íšŒÂ·ìœ ì—°Â·ì‘ì€ í–‰ìš´',tone:'pos'},
  {n:3,en:'Ship',ko:'ì„ ë°•',kw:'ì—¬í–‰Â·ì´ë™Â·í™•ì¥',tone:'neu'},
  {n:4,en:'House',ko:'ì§‘',kw:'ì•ˆì •Â·ê°€ì •Â·ê¸°ë°˜',tone:'pos'},
  {n:5,en:'Tree',ko:'ë‚˜ë¬´',kw:'ê±´ê°•Â·ì„±ì¥Â·ì‹œê°„',tone:'neu'},
  {n:6,en:'Cloud',ko:'êµ¬ë¦„',kw:'í˜¼ë€Â·ë¶ˆí™•ì‹¤Â·íŒë‹¨ ë³´ë¥˜',tone:'neg'},
  {n:7,en:'Snake',ko:'ë±€',kw:'ì¥ì• Â·ìœ í˜¹Â·ê¸°ë§Œ',tone:'neg'},
  {n:8,en:'Coffin',ko:'ê´€',kw:'ëÂ·ì „í™˜Â·ì •ë¦¬Â·ì¬ì¶œë°œ',tone:'neg'},
  {n:9,en:'Bouquet',ko:'ë¶€ì¼€',kw:'ê¸°ì¨Â·ì„ ë¬¼Â·í˜¸ì˜',tone:'pos'},
  {n:10,en:'Scythe',ko:'ë‚«',kw:'ê²°ë‹¨Â·ì ˆë‹¨Â·ê¸‰ë³€',tone:'neu'},
  {n:11,en:'Whip',ko:'ì±„ì°',kw:'ê°ˆë“±Â·ë°˜ë³µÂ·ë£¨í”„ ëŠê¸°',tone:'neg'},
  {n:12,en:'Bird',ko:'ìƒˆ',kw:'ëŒ€í™”Â·ì—°ë½Â·ì†Œí†µ',tone:'pos'},
  {n:13,en:'Child',ko:'ì•„ì´',kw:'ìƒˆ ì‹œì‘Â·ìˆœìˆ˜Â·ì‘ìŒ',tone:'pos'},
  {n:14,en:'Fox',ko:'ì—¬ìš°',kw:'ì£¼ì˜Â·í˜„ì‹¤ê°Â·ì¼(ì§ì¥)',tone:'neu'},
  {n:15,en:'Bear',ko:'ê³°',kw:'ê¶Œìœ„Â·ìì›Â·ë³´í˜¸',tone:'pos'},
  {n:16,en:'Stars',ko:'ë³„',kw:'ë¹„ì „Â·í¬ë§Â·ì¸í„°ë„·',tone:'pos'},
  {n:17,en:'Stork',ko:'í™©ìƒˆ',kw:'ë³€í™”Â·ì˜®ê¹€Â·ì—…ë°ì´íŠ¸',tone:'pos'},
  {n:18,en:'Dog',ko:'ê°œ',kw:'ì‹ ë¢°Â·ìš°ì •Â·íŒŒíŠ¸ë„ˆì‰½',tone:'pos'},
  {n:19,en:'Tower',ko:'íƒ‘',kw:'ê¸°ê´€Â·ê±°ë¦¬ë‘ê¸°Â·ê²©ìƒ',tone:'neu'},
  {n:20,en:'Garden',ko:'ì •ì›',kw:'ëª¨ì„Â·ê³µê°œÂ·í‰íŒ',tone:'pos'},
  {n:21,en:'Mountain',ko:'ì‚°',kw:'ì§€ì—°Â·ì¥ì• Â·ë²½',tone:'neg'},
  {n:22,en:'Crossroad',ko:'ê°ˆë¦¼ê¸¸',kw:'ì„ íƒÂ·ê²°ì •Â·ë°ì´í„° ë¹„êµ',tone:'neu'},
  {n:23,en:'Mice',ko:'ì¥',kw:'ì†Œëª¨Â·ë¶„ì‹¤Â·ë¶ˆì•ˆ',tone:'neg'},
  {n:24,en:'Heart',ko:'í•˜íŠ¸',kw:'ì‚¬ë‘Â·ì—´ì •Â·í˜¸ê°',tone:'pos'},
  {n:25,en:'Ring',ko:'ë°˜ì§€',kw:'ê³„ì•½Â·ìˆœí™˜Â·ì¥ê¸° ì»¤ë°‹',tone:'pos'},
  {n:26,en:'Book',ko:'ì±…',kw:'ë¹„ë°€Â·í•™ìŠµÂ·ë¬¸ì„œ',tone:'neu'},
  {n:27,en:'Letter',ko:'í¸ì§€',kw:'ë¬¸ì„œÂ·ë©”ì¼Â·ìŠ¹ì¸',tone:'pos'},
  {n:28,en:'Man',ko:'ë‚¨ì„±',kw:'í•µì‹¬ ì¸ë¬¼(ë‚¨ì„±)',tone:'neu'},
  {n:29,en:'Woman',ko:'ì—¬ì„±',kw:'í•µì‹¬ ì¸ë¬¼(ì—¬ì„±)',tone:'neu'},
  {n:30,en:'Lily',ko:'ë°±í•©',kw:'í‰í™”Â·ì„±ìˆ™Â·íœ´ì‹',tone:'pos'},
  {n:31,en:'Sun',ko:'íƒœì–‘',kw:'ì„±ê³µÂ·ê°€ì‹œì„±Â·ì—ë„ˆì§€',tone:'pos'},
  {n:32,en:'Moon',ko:'ë‹¬',kw:'ëª…ì˜ˆÂ·ê°ì •Â·ë¦¬ë“¬',tone:'neu'},
  {n:33,en:'Key',ko:'ì—´ì‡ ',kw:'í•´ê²°Â·ì •ë‹µÂ·ëŒíŒŒêµ¬',tone:'pos'},
  {n:34,en:'Fish',ko:'ë¬¼ê³ ê¸°',kw:'ì¬ë¬¼Â·êµë¥˜Â·ê±°ë˜',tone:'pos'},
  {n:35,en:'Anchor',ko:'ë‹»',kw:'ì•ˆì •Â·ê³ ì •Â·ì§€ì†ì„±',tone:'pos'},
  {n:36,en:'Cross',ko:'ì‹­ìê°€',kw:'ê³ ë‚œÂ·ì‹ ë…Â·ì±…ì„',tone:'neg'},
];
const IMG = n => `images/ë ˆë…¸ë¨¼ë“œ-${String(n).padStart(2,'0')}.png`;
const EMO = {pos:'ğŸ”µ',neg:'ğŸ”´',neu:'ğŸŸ¢'};
const TONE_NAME = {pos:'ê¸ì •',neg:'ë¶€ì •',neu:'ì¤‘ë¦½'};
const byId = id => document.getElementById(id);
const resultRoot = byId('result');

/* ì§ˆë¬¸ í† ê¸€ */
byId('qToggle').addEventListener('change', e=>{
  byId('qInput').style.display = e.target.checked ? 'block':'none';
});

/* ì¹´ë“œ ë·° */
function cardView(card, pin=true){
  return `
  <article class="card">
    <div style="position:relative">
      ${pin?`<span class="pin ${card.tone}"></span>`:''}
      <img class="img" src="${IMG(card.n)}" alt="${card.en} ${card.ko}">
    </div>
    <h4>${card.n}. ${card.en} <small>(${card.ko})</small></h4>
    <p class="kw">${card.kw}</p>
    <span class="tone ${card.tone}"><span class="emo">${EMO[card.tone]}</span> ${TONE_NAME[card.tone]}</span>
  </article>`;
}

/* ì´í‰ */
function buildSummary(cards, title='ì´í‰'){
  const c={pos:0,neg:0,neu:0}; cards.forEach(x=>c[x.tone]++);
  const tone = c.neg>c.pos?'neg':(c.pos>c.neg?'pos':'neu');
  const list = cards.map(x=>`<li>${x.n}. ${x.en} â€” ${x.kw}</li>`).join('');
  let rec='ìƒí™© ê´€ì°°ê³¼ ì¶”ê°€ ë°ì´í„° í™•ë³´ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.';
  if(tone==='pos') rec='ìš°í˜¸ì  íë¦„ì…ë‹ˆë‹¤. ë“¤ì–´ì˜¨ ì œì•ˆ/ì—°ë½ì„ í™œìš©í•´ ë³´ì„¸ìš”.';
  if(tone==='neg') rec='ë¦¬ìŠ¤í¬ ê´€ë¦¬ì™€ ì¼ì • ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¬¸ì„œÂ·ì¡°ê±´ ì¬ì ê²€ ê¶Œì¥.';
  const y = (tone==='pos'?'ìš°í˜¸ì  íë¦„. ì„±ê³¼ ê°€ì‹œí™”/í•´ê²° ì‹¤ë§ˆë¦¬.':
             tone==='neg'?'ë¦¬ìŠ¤í¬ ì‹ í˜¸. ê°ˆë“±/ì§€ì—° ê´€ë¦¬ì™€ ê³„íš ì¬ì •ë¹„.':
             'ê´€ë§ êµ­ë©´. ì„ íƒì§€ ë¹„êµì™€ ë°ì´í„° ë³´ê°•ì´ í•µì‹¬.');
  return `
  <div class="summary-box">
    <h5>${title}: <span class="tone ${tone}"><span class="emo">${EMO[tone]}</span> ${TONE_NAME[tone]}</span>
      <small style="color:var(--muted)"> (ê¸ì • ${c.pos} / ë¶€ì • ${c.neg} / ì¤‘ë¦½ ${c.neu})</small></h5>
    <ul>${list}</ul>
    <p style="margin:.6rem 0 0"><strong>ê¶Œê³ :</strong> ${rec}</p>
    <p style="margin:.4rem 0 0"><strong>ìš”ì•½:</strong> ${y}</p>
  </div>`;
}

/* ì…”í”Œ */
function shuffled(a){a=a.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a;}
function mount(html){const sec=document.createElement('section');sec.innerHTML=html;resultRoot.prepend(sec);return sec;}

/* 1/3/5 */
function drawN(n){
  const cards=shuffled(CARDS).slice(0,n);
  const q = byId('qToggle').checked && byId('qInput').value.trim() ? `<div class="chip">ì§ˆë¬¸: ${byId('qInput').value.trim()}</div>` : '';
  const html = `
    <section class="panel" data-spread="${n===3?'3':(n===5?'5':'1')}">
      <div class="chips">${q}</div>
      <div class="cards-row">${cards.map(c=>cardView(c)).join('')}</div>
      ${buildSummary(cards,'ì „ì²´ í†¤')}
    </section>`;
  mount(html);
}

/* ì‹­ì (ê²¹ì¹¨ ë°©ì§€ ê·¸ë¦¬ë“œ) */
function drawCross(){
  const d=shuffled(CARDS).slice(0,5);
  const [center, south, east, west, north] = d;
  const html = `
    <section class="panel cross-wrap" data-spread="cross">
      <div class="cross-grid">
        <div class="pos-n">${cardView(north,false)}</div>
        <div class="pos-w">${cardView(west,false)}</div>
        <div class="pos-c">${cardView(center,false)}</div>
        <div class="pos-e">${cardView(east,false)}</div>
        <div class="pos-s">${cardView(south,false)}</div>
      </div>
      ${buildSummary(d,'ì „ì²´ í†¤')}
    </section>`;
  mount(html);
}

/* ì¢Œí‘œ/ì´ì›ƒ */
function neighbors(idx, rows, cols){
  const r=Math.floor(idx/cols), c=idx%cols;
  const inside=(rr,cc)=>rr>=0&&rr<rows&&cc>=0&&cc<cols;
  const id=(rr,cc)=>rr*cols+cc;
  const around=[];
  for(let dr=-1;dr<=1;dr++){for(let dc=-1;dc<=1;dc++){if(dr===0&&dc===0)continue;const rr=r+dr,cc=c+dc;if(inside(rr,cc))around.push(id(rr,cc));}}
  const ks=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];
  const knight=ks.map(([dr,dc])=>[r+dr,c+dc]).filter(([rr,cc])=>inside(rr,cc)).map(([rr,cc])=>id(rr,cc));
  return {around,knight};
}

/* í‚¤ì¹´ë“œ ì •ë³´ ë°•ìŠ¤ */
function gtHelperHTML(target, around, knight){
  return `
  <div class="summary-box">
    <h5>í‚¤ ì¹´ë“œ: ${target.n}. ${target.en} (${target.ko}) â€” <span style="color:var(--muted)">${target.kw}</span></h5>
    <p style="margin:.3rem 0 0"><strong>ì£¼ìœ„ ì¹´ë“œ</strong> (${around.length}): ${around.map(x=>`${x.n}.${x.en}`).join(', ')}</p>
    <p style="margin:.3rem 0 0"><strong>ë‚˜ì´íŒ…</strong> (${knight.length}): ${knight.map(x=>`${x.n}.${x.en}`).join(', ')}</p>
    <p style="margin:.5rem 0 0;color:var(--muted)">* ì¹´ë“œë¥¼ ëˆŒëŸ¬ <strong>ì•„ë˜</strong>ì—ì„œ í‚¤ ì¹´ë“œì˜ ì£¼ìœ„ ì¹´ë“œì™€ ë‚˜ì´íŒ…ì„ í™•ì¸í•˜ì„¸ìš”.</p>
  </div>`;
}

/* 9Ã—4 */
function drawGT(){
  const deck=shuffled(CARDS);
  const wrap=document.createElement('section');
  wrap.className='panel gt-wrap'; wrap.setAttribute('data-spread','gt-9x4');
  wrap.innerHTML=`
    <div class="gt-grid" style="grid-template-columns:repeat(9,1fr)">${deck.map(c=>cardView(c,false)).join('')}</div>
    <div class="gt-info">${buildSummary(deck,'ì „ì²´ í†¤')}</div>
    <div class="gt-key"></div>`;
  resultRoot.prepend(wrap);

  const grid=wrap.querySelector('.gt-grid');
  grid.querySelectorAll('.card').forEach((el,i)=>{
    el.style.cursor='pointer';
    el.addEventListener('click',()=>{
      const nb=neighbors(i,4,9);
      wrap.querySelector('.gt-key').innerHTML = gtHelperHTML(deck[i], nb.around.map(x=>deck[x]), nb.knight.map(x=>deck[x]));
    });
  });
  wrap.querySelector('.gt-key').innerHTML = `<div class="summary-box"><p style="margin:0;color:var(--muted)">ì¹´ë“œë¥¼ ëˆŒëŸ¬ <strong>ì•„ë˜</strong>ì—ì„œ í‚¤ ì¹´ë“œì˜ ì£¼ìœ„ ì¹´ë“œì™€ ë‚˜ì´íŒ…ì„ í™•ì¸í•˜ì„¸ìš”.</p></div>`;
}

/* 8Ã—4+4 */
function drawGT84(){
  const deck=shuffled(CARDS), board=deck.slice(0,32), essence=deck.slice(32);
  const wrap=document.createElement('section');
  wrap.className='panel gt-wrap'; wrap.setAttribute('data-spread','gt-8x4');
  wrap.innerHTML=`
    <div class="gt-grid" style="grid-template-columns:repeat(8,1fr)">${board.map(c=>cardView(c,false)).join('')}</div>
    <div class="gt-key" style="margin-top:8px"></div>
    <div class="ess" style="margin-top:16px">
      <h4 style="margin:0 0 8px">ì•„ë˜ëŠ” <strong>ì—ì„¼ìŠ¤ 4ì¥</strong> ìš”ì•½</h4>
      <div class="cards-row" style="gap:10px;flex-wrap:wrap;justify-content:center">${essence.map(c=>cardView(c,false)).join('')}</div>
      ${buildSummary(essence,'ì—ì„¼ìŠ¤ í†¤')}
    </div>`;
  resultRoot.prepend(wrap);

  const grid=wrap.querySelector('.gt-grid');
  grid.querySelectorAll('.card').forEach((el,i)=>{
    el.style.cursor='pointer';
    el.addEventListener('click',()=>{
      const nb=neighbors(i,4,8);
      wrap.querySelector('.gt-key').innerHTML = gtHelperHTML(board[i], nb.around.map(x=>board[x]), nb.knight.map(x=>board[x]));
    });
  });
  wrap.querySelector('.gt-key').innerHTML = `<div class="summary-box"><p style="margin:0;color:var(--muted)">ì¹´ë“œë¥¼ ëˆŒëŸ¬ <strong>ì•„ë˜</strong>ì—ì„œ í‚¤ ì¹´ë“œì˜ ì£¼ìœ„ ì¹´ë“œì™€ ë‚˜ì´íŒ…ì„ í™•ì¸í•˜ì„¸ìš”.</p></div>`;
}

/* ë²„íŠ¼ */
byId('btn1').onclick = ()=>{ drawN(1); window.scrollTo({top:0,behavior:'smooth'}); };
byId('btn3').onclick = ()=>{ drawN(3); window.scrollTo({top:0,behavior:'smooth'}); };
byId('btn5').onclick = ()=>{ drawN(5); window.scrollTo({top:0,behavior:'smooth'}); };
byId('btnCross').onclick = ()=>{ drawCross(); window.scrollTo({top:0,behavior:'smooth'}); };
byId('btnGT').onclick = ()=>{ drawGT(); window.scrollTo({top:0,behavior:'smooth'}); };
byId('btnGT84').onclick = ()=>{ drawGT84(); window.scrollTo({top:0,behavior:'smooth'}); };

/* ì¹´ë“œ ì „ì²´ ë³´ê¸°(ë³€ê²½ ì—†ìŒ) */
const allWrap=byId('gridAll'), allCards=byId('allCards');
byId('btnList').onclick=()=>{
  allWrap.style.display=allWrap.style.display==='none'?'block':'none';
  if(allCards.childElementCount===0){
    allCards.style.gap='12px';
    CARDS.forEach(c=>{const el=document.createElement('div');el.innerHTML=cardView(c);allCards.appendChild(el.firstElementChild);});
  }
};
byId('search').addEventListener('input', e=>{
  const t=e.target.value.trim().toLowerCase();
  [...allCards.children].forEach(card=>{
    const txt=card.textContent.toLowerCase();
    card.style.display = txt.includes(t)?'block':'none';
  });
});
</script>
</body>
</html>